{
  super(context,attrs,defStyle);
  final TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.CircularImageView,defStyle,0);
  mMatrix=new Matrix();
  mSource=new RectF();
  mDestination=new RectF();
  mBitmapPaint=new Paint(Paint.LINEAR_TEXT_FLAG);
  mBitmapPaint.setFilterBitmap(true);
  mBitmapPaint.setDither(true);
  mBorderPaint=new Paint(Paint.ANTI_ALIAS_FLAG);
  mBorderPaint.setStyle(Paint.Style.STROKE);
  if (a.hasValue(R.styleable.CircularImageView_civBorder)) {
    setBorderEnabled(a.getBoolean(R.styleable.CircularImageView_civBorder,false));
  }
 else   if (a.hasValue(R.styleable.CircularImageView_civBorderColor) || a.hasValue(R.styleable.CircularImageView_civBorderWidth)) {
    setBorderEnabled(true);
  }
  setBorderColor(a.getColor(R.styleable.CircularImageView_civBorderColor,Color.TRANSPARENT));
  setBorderWidth(a.getDimensionPixelSize(R.styleable.CircularImageView_civBorderWidth,0));
  if (USE_OUTLINE) {
    if (a.hasValue(R.styleable.CircularImageView_civElevation)) {
      ViewCompat.setElevation(this,a.getDimensionPixelSize(R.styleable.CircularImageView_civElevation,0));
    }
  }
 else {
    mShadowRadius=a.getDimensionPixelSize(R.styleable.CircularImageView_civElevation,0);
  }
  a.recycle();
  if (USE_OUTLINE) {
    initOutlineProvider();
  }
}
