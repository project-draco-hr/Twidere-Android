{
  StringBuilder sb=new StringBuilder();
  int start, end, prevEnd=-1;
  while ((start=path.indexOf('{',prevEnd)) != -1 && (end=path.indexOf('}',start)) != -1) {
    sb.append(path.substring(prevEnd + 1,start));
    final String key=path.substring(start + 1,end);
    final String replacement=findPathReplacement(key);
    if (replacement == null)     throw new IllegalArgumentException("Path key {" + key + "} not bound");
    sb.append(replacement);
    prevEnd=end;
  }
  sb.append(path.substring(prevEnd + 1));
  return sb.toString();
}
