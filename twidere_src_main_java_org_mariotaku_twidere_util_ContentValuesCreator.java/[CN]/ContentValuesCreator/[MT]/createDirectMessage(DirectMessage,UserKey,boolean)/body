{
  if (message == null)   return null;
  final ContentValues values=new ContentValues();
  final User sender=message.getSender(), recipient=message.getRecipient();
  if (sender == null || recipient == null)   return null;
  final String sender_profile_image_url=TwitterContentUtils.getProfileImageUrl(sender);
  final String recipient_profile_image_url=TwitterContentUtils.getProfileImageUrl(recipient);
  values.put(DirectMessages.ACCOUNT_KEY,accountKey.toString());
  values.put(DirectMessages.MESSAGE_ID,message.getId());
  values.put(DirectMessages.MESSAGE_TIMESTAMP,message.getCreatedAt().getTime());
  values.put(DirectMessages.SENDER_ID,sender.getId());
  values.put(DirectMessages.RECIPIENT_ID,recipient.getId());
  if (isOutgoing) {
    values.put(DirectMessages.CONVERSATION_ID,recipient.getId());
  }
 else {
    values.put(DirectMessages.CONVERSATION_ID,sender.getId());
  }
  final String text_html=InternalTwitterContentUtils.formatDirectMessageText(message);
  values.put(DirectMessages.TEXT_HTML,text_html);
  values.put(DirectMessages.TEXT_PLAIN,message.getText());
  values.put(DirectMessages.TEXT_UNESCAPED,HtmlEscapeHelper.toPlainText(text_html));
  values.put(DirectMessages.IS_OUTGOING,isOutgoing);
  values.put(DirectMessages.SENDER_NAME,sender.getName());
  values.put(DirectMessages.SENDER_SCREEN_NAME,sender.getScreenName());
  values.put(DirectMessages.RECIPIENT_NAME,recipient.getName());
  values.put(DirectMessages.RECIPIENT_SCREEN_NAME,recipient.getScreenName());
  values.put(DirectMessages.SENDER_PROFILE_IMAGE_URL,sender_profile_image_url);
  values.put(DirectMessages.RECIPIENT_PROFILE_IMAGE_URL,recipient_profile_image_url);
  final ParcelableMedia[] mediaArray=ParcelableMediaUtils.fromEntities(message);
  values.put(DirectMessages.MEDIA_JSON,JsonSerializer.serialize(Arrays.asList(mediaArray),ParcelableMedia.class));
  return values;
}
