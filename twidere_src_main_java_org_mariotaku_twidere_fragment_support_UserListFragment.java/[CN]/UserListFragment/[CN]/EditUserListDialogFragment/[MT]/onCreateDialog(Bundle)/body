{
  final Bundle bundle=savedInstanceState == null ? getArguments() : savedInstanceState;
  mAccountId=bundle != null ? bundle.getLong(EXTRA_ACCOUNT_ID,-1) : -1;
  mListId=bundle != null ? bundle.getLong(EXTRA_LIST_ID,-1) : -1;
  mName=bundle != null ? bundle.getString(EXTRA_LIST_NAME) : null;
  mDescription=bundle != null ? bundle.getString(EXTRA_DESCRIPTION) : null;
  mIsPublic=bundle == null || bundle.getBoolean(EXTRA_IS_PUBLIC,true);
  final Context wrapped=ThemeUtils.getDialogThemedContext(getActivity());
  final AlertDialog.Builder builder=new AlertDialog.Builder(wrapped);
  builder.setView(R.layout.dialog_user_list_detail_editor);
  builder.setTitle(R.string.user_list);
  builder.setPositiveButton(android.R.string.ok,this);
  builder.setNegativeButton(android.R.string.cancel,this);
  final AlertDialog dialog=builder.create();
  dialog.setOnShowListener(new DialogInterface.OnShowListener(){
    @Override public void onShow(    DialogInterface dialog){
      AlertDialog alertDialog=(AlertDialog)dialog;
      MaterialEditText mEditName=(MaterialEditText)alertDialog.findViewById(R.id.name);
      MaterialEditText mEditDescription=(MaterialEditText)alertDialog.findViewById(R.id.description);
      CheckBox mPublicCheckBox=(CheckBox)alertDialog.findViewById(R.id.is_public);
      mEditName.addValidator(new UserListNameValidator(getString(R.string.invalid_list_name)));
      if (mName != null) {
        mEditName.setText(mName);
      }
      if (mDescription != null) {
        mEditDescription.setText(mDescription);
      }
      mPublicCheckBox.setChecked(mIsPublic);
    }
  }
);
  return dialog;
}
