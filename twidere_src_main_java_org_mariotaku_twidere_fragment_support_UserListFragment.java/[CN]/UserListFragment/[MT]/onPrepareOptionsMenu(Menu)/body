{
  final ParcelableUserList userList=mUserList;
  setMenuItemAvailability(menu,MENU_INFO,userList != null);
  menu.removeGroup(MENU_GROUP_USER_LIST_EXTENSION);
  if (userList != null) {
    final boolean isMyList=userList.user_id == userList.account_id;
    final boolean isFollowing=userList.is_following;
    setMenuItemAvailability(menu,MENU_EDIT,isMyList);
    setMenuItemAvailability(menu,MENU_FOLLOW,!isMyList);
    setMenuItemAvailability(menu,MENU_ADD,isMyList);
    setMenuItemAvailability(menu,MENU_DELETE,isMyList);
    final MenuItem followItem=menu.findItem(MENU_FOLLOW);
    if (isFollowing) {
      followItem.setIcon(R.drawable.ic_action_cancel);
      followItem.setTitle(R.string.unsubscribe);
    }
 else {
      followItem.setIcon(R.drawable.ic_action_add);
      followItem.setTitle(R.string.subscribe);
    }
    final Intent extensionsIntent=new Intent(INTENT_ACTION_EXTENSION_OPEN_USER_LIST);
    extensionsIntent.setExtrasClassLoader(getActivity().getClassLoader());
    extensionsIntent.putExtra(EXTRA_USER_LIST,userList);
    addIntentToMenu(getActivity(),menu,extensionsIntent,MENU_GROUP_USER_LIST_EXTENSION);
  }
 else {
    setMenuItemAvailability(menu,MENU_EDIT,false);
    setMenuItemAvailability(menu,MENU_FOLLOW,false);
    setMenuItemAvailability(menu,MENU_ADD,false);
    setMenuItemAvailability(menu,MENU_DELETE,false);
  }
}
