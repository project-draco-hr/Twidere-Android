{
  mUiColor=color;
  mPreviousActionBarItemIsDark=0;
  mPreviousTabItemIsDark=0;
  if (mActionBarBackground == null) {
    setupBaseActionBar();
  }
  final BaseActivity activity=(BaseActivity)getActivity();
  if (Config.coloredActionBar(activity,activity.getATEKey())) {
    mPrimaryColor=color;
    mPrimaryColorDark=ThemeUtils.computeDarkColor(color);
  }
 else {
    mPrimaryColor=Config.primaryColor(activity,activity.getATEKey());
    mPrimaryColorDark=Color.BLACK;
  }
  if (mActionBarBackground != null) {
    mActionBarBackground.setColor(mPrimaryColor);
  }
  int taskColor;
  if (Config.coloredActionBar(activity,activity.getATEKey())) {
    taskColor=color;
  }
 else {
    taskColor=Config.toolbarColor(activity,activity.getATEKey(),mToolbar);
  }
  if (mUser != null) {
    final String name=mUserColorNameManager.getDisplayName(mUser,mNameFirst);
    ActivitySupport.setTaskDescription(activity,new TaskDescriptionCompat(name,null,taskColor));
  }
 else {
    ActivitySupport.setTaskDescription(activity,new TaskDescriptionCompat(null,null,taskColor));
  }
  final int optimalAccentColor=ThemeUtils.getOptimalAccentColor(color,mDescriptionView.getCurrentTextColor());
  mDescriptionView.setLinkTextColor(optimalAccentColor);
  mLocationView.setLinkTextColor(optimalAccentColor);
  mURLView.setLinkTextColor(optimalAccentColor);
  mProfileBannerView.setBackgroundColor(color);
  mPagerIndicator.setBackgroundColor(mPrimaryColor);
  final HeaderDrawerLayout drawer=mHeaderDrawerLayout;
  if (drawer != null) {
    final int offset=drawer.getPaddingTop() - drawer.getHeaderTop();
    updateScrollOffset(offset);
  }
}
