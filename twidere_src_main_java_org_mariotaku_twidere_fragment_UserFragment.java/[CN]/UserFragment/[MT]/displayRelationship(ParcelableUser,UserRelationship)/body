{
  if (user == null) {
    mRelationship=null;
    return;
  }
  if (user.account_key.maybeEquals(user.key)) {
    mFollowButton.setText(R.string.edit);
    mFollowButton.setVisibility(View.VISIBLE);
    mRelationship=userRelationship;
    return;
  }
  if (userRelationship == null || !userRelationship.check(user)) {
    mRelationship=null;
    return;
  }
 else {
    mRelationship=userRelationship;
  }
  invalidateOptionsMenu();
  mFollowButton.setEnabled(userRelationship.blocking || !userRelationship.blocked_by);
  if (userRelationship.blocked_by) {
    mPagesErrorContainer.setVisibility(View.GONE);
    mPagesErrorText.setText(null);
    mPagesContent.setVisibility(View.VISIBLE);
  }
 else   if (!userRelationship.following && user.is_protected) {
    mPagesErrorContainer.setVisibility(View.VISIBLE);
    mPagesErrorText.setText(R.string.user_protected_summary);
    mPagesErrorIcon.setImageResource(R.drawable.ic_info_locked);
    mPagesContent.setVisibility(View.GONE);
  }
 else {
    mPagesErrorContainer.setVisibility(View.GONE);
    mPagesErrorText.setText(null);
    mPagesContent.setVisibility(View.VISIBLE);
  }
  if (userRelationship.blocking) {
    mFollowButton.setText(R.string.unblock);
  }
 else   if (userRelationship.following) {
    mFollowButton.setText(R.string.unfollow);
  }
 else   if (user.is_follow_request_sent) {
    mFollowButton.setText(R.string.requested);
  }
 else {
    mFollowButton.setText(R.string.follow);
  }
  mFollowButton.setCompoundDrawablePadding(Math.round(mFollowButton.getTextSize() * 0.25f));
  mFollowingYouIndicator.setVisibility(userRelationship.followed_by ? View.VISIBLE : View.GONE);
  final CacheUserInfoTask task=new CacheUserInfoTask(getContext().getApplicationContext());
  task.setParams(Pair.create(user,userRelationship));
  TaskStarter.execute(task);
  mFollowButton.setVisibility(View.VISIBLE);
}
