{
  super.onActivityCreated(savedInstanceState);
  final FragmentActivity activity=getActivity();
  setHasOptionsMenu(true);
  mUserColorNameManager.registerColorChangedListener(this);
  mUserColorNameManager.registerNicknameChangedListener(this);
  mNameFirst=mPreferences.getBoolean(KEY_NAME_FIRST);
  mLocale=getResources().getConfiguration().locale;
  mCardBackgroundColor=ThemeUtils.getCardBackgroundColor(activity,ThemeUtils.getThemeBackgroundOption(activity),ThemeUtils.getUserThemeBackgroundAlpha(activity));
  mActionBarShadowColor=0xA0000000;
  final Bundle args=getArguments();
  UserKey accountId=null;
  String userId=null;
  String screenName=null;
  if (savedInstanceState != null) {
    args.putAll(savedInstanceState);
  }
 else {
    accountId=args.getParcelable(EXTRA_ACCOUNT_KEY);
    userId=args.getString(EXTRA_USER_ID);
    screenName=args.getString(EXTRA_SCREEN_NAME);
  }
  Utils.setNdefPushMessageCallback(activity,new CreateNdefMessageCallback(){
    @Override public NdefMessage createNdefMessage(    NfcEvent event){
      final ParcelableUser user=getUser();
      if (user == null)       return null;
      return new NdefMessage(new NdefRecord[]{NdefRecord.createUri(LinkCreator.getTwitterUserLink(user.screen_name))});
    }
  }
);
  activity.setEnterSharedElementCallback(new SharedElementCallback(){
    @Override public void onSharedElementStart(    List<String> sharedElementNames,    List<View> sharedElements,    List<View> sharedElementSnapshots){
      final int idx=sharedElementNames.indexOf(TRANSITION_NAME_PROFILE_IMAGE);
      if (idx != -1) {
        final View view=sharedElements.get(idx);
        int[] location=new int[2];
        final RectF bounds=new RectF(0,0,view.getWidth(),view.getHeight());
        view.getLocationOnScreen(location);
        bounds.offsetTo(location[0],location[1]);
        mProfileImageView.setTransitionSource(bounds);
      }
      super.onSharedElementStart(sharedElementNames,sharedElements,sharedElementSnapshots);
    }
    @Override public void onSharedElementEnd(    List<String> sharedElementNames,    List<View> sharedElements,    List<View> sharedElementSnapshots){
      int idx=sharedElementNames.indexOf(TRANSITION_NAME_PROFILE_IMAGE);
      if (idx != -1) {
        final View view=sharedElements.get(idx);
        int[] location=new int[2];
        final RectF bounds=new RectF(0,0,view.getWidth(),view.getHeight());
        view.getLocationOnScreen(location);
        bounds.offsetTo(location[0],location[1]);
        mProfileImageView.setTransitionDestination(bounds);
      }
      super.onSharedElementEnd(sharedElementNames,sharedElements,sharedElementSnapshots);
    }
  }
);
  ViewCompat.setTransitionName(mProfileImageView,TRANSITION_NAME_PROFILE_IMAGE);
  ViewCompat.setTransitionName(mProfileTypeView,TRANSITION_NAME_PROFILE_TYPE);
  mTintedStatusFrameLayout.setWindowInsetsListener(new TintedStatusFrameLayout.WindowInsetsListener(){
    @Override public void onApplyWindowInsets(    int left,    int top,    int right,    int bottom){
      mProfileContentContainer.setPadding(0,top,0,0);
      mProfileBannerSpace.setStatusBarHeight(top);
      if (mProfileBannerSpace.getToolbarHeight() == 0) {
        int toolbarHeight=mToolbar.getMeasuredHeight();
        if (toolbarHeight == 0) {
          toolbarHeight=ThemeUtils.getActionBarHeight(getContext());
        }
        mProfileBannerSpace.setToolbarHeight(toolbarHeight);
      }
    }
  }
);
  mProfileContentContainer.setOnSizeChangedListener(new OnSizeChangedListener(){
    @Override public void onSizeChanged(    View view,    int w,    int h,    int oldw,    int oldh){
      final int toolbarHeight=mToolbar.getMeasuredHeight();
      mHeaderDrawerLayout.setPadding(0,toolbarHeight,0,0);
      mProfileBannerSpace.setToolbarHeight(toolbarHeight);
    }
  }
);
  mHeaderDrawerLayout.setDrawerCallback(this);
  mPagerAdapter=new SupportTabsAdapter(activity,getChildFragmentManager());
  mViewPager.setOffscreenPageLimit(3);
  mViewPager.setAdapter(mPagerAdapter);
  mPagerIndicator.setViewPager(mViewPager);
  mPagerIndicator.setTabDisplayOption(TabPagerIndicator.LABEL);
  mPagerIndicator.setOnPageChangeListener(this);
  mFollowButton.setOnClickListener(this);
  mProfileImageView.setOnClickListener(this);
  mProfileBannerView.setOnClickListener(this);
  mListedContainer.setOnClickListener(this);
  mGroupsContainer.setOnClickListener(this);
  mFollowersContainer.setOnClickListener(this);
  mFriendsContainer.setOnClickListener(this);
  mHeaderErrorIcon.setOnClickListener(this);
  mProfileBirthdayBannerView.setOnClickListener(this);
  mProfileBannerView.setOnSizeChangedListener(this);
  mProfileBannerSpace.setOnTouchListener(this);
  mProfileNameBackground.setBackgroundColor(mCardBackgroundColor);
  mProfileDetailsContainer.setBackgroundColor(mCardBackgroundColor);
  mPagerIndicator.setBackgroundColor(mCardBackgroundColor);
  final float actionBarElevation=ThemeUtils.getSupportActionBarElevation(activity);
  ViewCompat.setElevation(mPagerIndicator,actionBarElevation);
  setupBaseActionBar();
  setupUserPages();
  if (activity instanceof IThemedActivity) {
    ViewSupport.setBackground(mPagerOverlay,ThemeUtils.getNormalWindowContentOverlay(activity));
    setUiColor(((IThemedActivity)activity).getCurrentThemeColor());
  }
  getUserInfo(accountId,userId,screenName,false);
}
