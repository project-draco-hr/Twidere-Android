{
  if (response == null)   return SingleResponse.getInstance(false);
  final List<Trends> messages=response.getData();
  final ArrayList<String> hashtags=new ArrayList<>();
  final ArrayList<ContentValues> hashtagValues=new ArrayList<>();
  if (messages != null && messages.size() > 0) {
    final ContentValues[] valuesArray=ContentValuesCreator.createTrends(messages);
    for (    final ContentValues values : valuesArray) {
      final String hashtag=values.getAsString(CachedTrends.NAME).replaceFirst("#","");
      if (hashtags.contains(hashtag)) {
        continue;
      }
      hashtags.add(hashtag);
      final ContentValues hashtagValue=new ContentValues();
      hashtagValue.put(CachedHashtags.NAME,hashtag);
      hashtagValues.add(hashtagValue);
    }
    mResolver.delete(uri,null,null);
    ContentResolverUtils.bulkInsert(mResolver,uri,valuesArray);
    ContentResolverUtils.bulkDelete(mResolver,CachedHashtags.CONTENT_URI,CachedHashtags.NAME,hashtags,null,true);
    ContentResolverUtils.bulkInsert(mResolver,CachedHashtags.CONTENT_URI,hashtagValues.toArray(new ContentValues[hashtagValues.size()]));
  }
  return SingleResponse.getInstance(true);
}
