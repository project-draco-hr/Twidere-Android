{
  super.onPrepareOptionsMenu(menu);
  final File file=mVideoFile;
  final Pair<String,String> linkAndType=mVideoUrlAndType;
  final boolean isLoading=linkAndType != null && mVideoLoader.isLoading(linkAndType.first);
  final boolean hasVideo=file != null && file.exists() && linkAndType != null;
  MenuUtils.setMenuItemAvailability(menu,MENU_REFRESH,!hasVideo && !isLoading);
  MenuUtils.setMenuItemAvailability(menu,MENU_SHARE,hasVideo && !isLoading);
  MenuUtils.setMenuItemAvailability(menu,MENU_SAVE,hasVideo && !isLoading);
  if (!hasVideo)   return;
  final MenuItem shareItem=menu.findItem(MENU_SHARE);
  final Intent intent=new Intent(Intent.ACTION_SEND);
  final Uri fileUri=Uri.fromFile(file);
  intent.setDataAndType(fileUri,linkAndType.second);
  intent.putExtra(Intent.EXTRA_STREAM,fileUri);
  final MediaViewerActivity activity=(MediaViewerActivity)getActivity();
  if (activity.hasStatus()) {
    final ParcelableStatus status=activity.getStatus();
    intent.putExtra(Intent.EXTRA_TEXT,Utils.getStatusShareText(activity,status));
    intent.putExtra(Intent.EXTRA_SUBJECT,Utils.getStatusShareSubject(activity,status));
  }
  shareItem.setIntent(Intent.createChooser(intent,getString(R.string.share)));
}
