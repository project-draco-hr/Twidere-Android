{
  final ParcelableMedia media=getMedia()[position];
switch (media.type) {
case ParcelableMedia.Type.IMAGE:
{
      final Bundle args=new Bundle();
      args.putParcelable(ImagePageFragment.EXTRA_MEDIA_URI,Uri.parse(media.media_url));
      return (MediaViewerFragment)Fragment.instantiate(this,ImagePageFragment.class.getName(),args);
    }
case ParcelableMedia.Type.ANIMATED_GIF:
case ParcelableMedia.Type.CARD_ANIMATED_GIF:
{
    final Bundle args=new Bundle();
    args.putBoolean(VideoPageFragment.EXTRA_LOOP,true);
    args.putParcelable(EXTRA_MEDIA,media);
    return (MediaViewerFragment)Fragment.instantiate(this,VideoPageFragment.class.getName(),args);
  }
case ParcelableMedia.Type.VIDEO:
{
  final Bundle args=new Bundle();
  args.putParcelable(EXTRA_MEDIA,media);
  return (MediaViewerFragment)Fragment.instantiate(this,VideoPageFragment.class.getName(),args);
}
case ParcelableMedia.Type.EXTERNAL_PLAYER:
{
final Bundle args=new Bundle();
args.putParcelable(EXTRA_MEDIA,media);
return (MediaViewerFragment)Fragment.instantiate(this,ExternalBrowserPageFragment.class.getName(),args);
}
}
throw new UnsupportedOperationException(String.valueOf(media));
}
