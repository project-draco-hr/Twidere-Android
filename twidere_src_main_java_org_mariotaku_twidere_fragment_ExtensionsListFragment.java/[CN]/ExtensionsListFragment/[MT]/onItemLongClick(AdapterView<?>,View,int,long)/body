{
  mSelectedExtension=mAdapter.getItem(position);
  if (mSelectedExtension == null)   return false;
  mPopupMenu=PopupMenu.getInstance(getActivity(),view);
  mPopupMenu.inflate(R.menu.action_extension);
  final Menu menu=mPopupMenu.getMenu();
  final MenuItem settings=menu.findItem(MENU_SETTINGS);
  final Intent intent=mSelectedExtension.pname != null && mSelectedExtension.settings != null ? new Intent(INTENT_ACTION_EXTENSION_SETTINGS) : null;
  if (intent != null) {
    intent.setClassName(mSelectedExtension.pname,mSelectedExtension.settings);
  }
  settings.setVisible(intent != null && mPackageManager.queryIntentActivities(intent,0).size() == 1);
  mPopupMenu.setOnMenuItemClickListener(this);
  mPopupMenu.show();
  return true;
}
