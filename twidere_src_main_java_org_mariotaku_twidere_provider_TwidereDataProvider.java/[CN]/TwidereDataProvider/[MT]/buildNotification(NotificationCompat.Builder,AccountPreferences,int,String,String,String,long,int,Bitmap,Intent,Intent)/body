{
  final Context context=getContext();
  builder.setTicker(ticker);
  builder.setContentTitle(title);
  builder.setContentText(message);
  builder.setAutoCancel(true);
  builder.setWhen(System.currentTimeMillis());
  builder.setSmallIcon(icon);
  if (largeIcon != null) {
    builder.setLargeIcon(largeIcon);
  }
  if (deleteIntent != null) {
    builder.setDeleteIntent(PendingIntent.getBroadcast(context,0,deleteIntent,PendingIntent.FLAG_UPDATE_CURRENT));
  }
  if (contentIntent != null) {
    builder.setContentIntent(PendingIntent.getActivity(context,0,contentIntent,PendingIntent.FLAG_UPDATE_CURRENT));
  }
  int defaults=0;
  if (isNotificationAudible()) {
    if (AccountPreferences.isNotificationHasRingtone(notificationType)) {
      final Uri ringtone=accountPrefs.getNotificationRingtone();
      builder.setSound(ringtone,Notification.STREAM_DEFAULT);
    }
    if (AccountPreferences.isNotificationHasVibration(notificationType)) {
      defaults|=Notification.DEFAULT_VIBRATE;
    }
 else {
      defaults&=~Notification.DEFAULT_VIBRATE;
    }
  }
  if (AccountPreferences.isNotificationHasLight(notificationType)) {
    final int color=accountPrefs.getNotificationLightColor();
    builder.setLights(color,1000,2000);
  }
  builder.setDefaults(defaults);
}
