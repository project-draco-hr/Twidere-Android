{
  final NotificationManager nm=getNotificationManager();
  if (notifiedCount == 0 || accountPreferences == null || statuses.isEmpty())   return;
  final long accountId=accountPreferences.getAccountId();
  final Context context=getContext();
  final Resources resources=context.getResources();
  final NotificationCompat.Builder notifBuilder=new NotificationCompat.Builder(context);
  final ParcelableStatus firstItem=statuses.get(0);
  final int statusesSize=statuses.size();
  final Intent deleteIntent=new Intent(BROADCAST_NOTIFICATION_DELETED);
  deleteIntent.putExtra(EXTRA_NOTIFICATION_ID,notificationId);
  deleteIntent.putExtra(EXTRA_NOTIFICATION_ACCOUNT,accountId);
  final Intent contentIntent;
  final String title;
  if (statusesSize > 1) {
    notifBuilder.setNumber(statusesSize);
  }
  final int usersCount=getUsersCount(statuses);
  contentIntent=new Intent(context,HomeActivity.class);
  contentIntent.setAction(Intent.ACTION_MAIN);
  contentIntent.addCategory(Intent.CATEGORY_LAUNCHER);
  contentIntent.putExtra(EXTRA_TAB_TYPE,TAB_TYPE_MENTIONS_TIMELINE);
  if (statusesSize == 1) {
    final Uri.Builder uriBuilder=new Uri.Builder();
    uriBuilder.scheme(SCHEME_TWIDERE);
    uriBuilder.authority(AUTHORITY_STATUS);
    uriBuilder.appendQueryParameter(QUERY_PARAM_ACCOUNT_ID,String.valueOf(firstItem.account_id));
    uriBuilder.appendQueryParameter(QUERY_PARAM_STATUS_ID,String.valueOf(firstItem.id));
    final Intent statusIntent=new Intent(Intent.ACTION_VIEW,uriBuilder.build());
    statusIntent.setExtrasClassLoader(context.getClassLoader());
    statusIntent.putExtra(EXTRA_STATUS,firstItem);
    contentIntent.putExtra(EXTRA_EXTRA_INTENT,statusIntent);
  }
  final String displayName=getDisplayName(context,firstItem.user_id,firstItem.user_name,firstItem.user_screen_name,mNameFirst,mNickOnly);
  if (usersCount > 1) {
    title=resources.getString(titleMutiple,displayName,usersCount - 1);
  }
 else {
    title=resources.getString(titleSingle,displayName);
  }
  notifBuilder.setLargeIcon(getProfileImageForNotification(firstItem.user_profile_image_url));
  buildNotification(notifBuilder,accountPreferences,notificationType,title,title,firstItem.text_plain,firstItem.timestamp,icon,null,contentIntent,deleteIntent);
  final NotificationCompat.Style notifStyle;
  if (statusesSize > 1) {
    final NotificationCompat.InboxStyle inboxStyle=new NotificationCompat.InboxStyle(notifBuilder);
    final int max=Math.min(4,statusesSize);
    for (int i=0; i < max; i++) {
      final ParcelableStatus s=safeGet(statuses,i);
      if (s == null)       return;
      final String nameEscaped=HtmlEscapeHelper.escape(getDisplayName(context,s.user_id,s.user_name,s.user_screen_name,mNameFirst,mNickOnly));
      final String textEscaped=HtmlEscapeHelper.escape(stripMentionText(s.text_unescaped,getAccountScreenName(context,s.account_id)));
      inboxStyle.addLine(Html.fromHtml(String.format("<b>%s</b>: %s",nameEscaped,textEscaped)));
    }
    if (max == 4 && statusesSize - max > 0) {
      inboxStyle.addLine(context.getString(R.string.and_more,statusesSize - max));
    }
    inboxStyle.setSummaryText(getAccountDisplayName(context,accountId,mNameFirst));
    notifStyle=inboxStyle;
  }
 else {
    final Intent replyIntent=new Intent(INTENT_ACTION_REPLY);
    replyIntent.setExtrasClassLoader(context.getClassLoader());
    replyIntent.putExtra(EXTRA_NOTIFICATION_ID,notificationType);
    replyIntent.putExtra(EXTRA_NOTIFICATION_ACCOUNT,accountId);
    replyIntent.putExtra(EXTRA_STATUS,firstItem);
    replyIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    final Uri.Builder viewProfileBuilder=new Uri.Builder();
    viewProfileBuilder.scheme(SCHEME_TWIDERE);
    viewProfileBuilder.authority(AUTHORITY_USER);
    viewProfileBuilder.appendQueryParameter(QUERY_PARAM_ACCOUNT_ID,String.valueOf(firstItem.account_id));
    viewProfileBuilder.appendQueryParameter(QUERY_PARAM_USER_ID,String.valueOf(firstItem.user_id));
    final Intent viewProfileIntent=new Intent(Intent.ACTION_VIEW,viewProfileBuilder.build());
    viewProfileIntent.setPackage(APP_PACKAGE_NAME);
    notifBuilder.addAction(R.drawable.ic_action_reply,context.getString(R.string.reply),PendingIntent.getActivity(context,0,replyIntent,PendingIntent.FLAG_UPDATE_CURRENT));
    notifBuilder.addAction(R.drawable.ic_action_profile,context.getString(R.string.view_user_profile),PendingIntent.getActivity(context,0,viewProfileIntent,PendingIntent.FLAG_UPDATE_CURRENT));
    final NotificationCompat.BigTextStyle bigTextStyle=new NotificationCompat.BigTextStyle(notifBuilder);
    bigTextStyle.bigText(stripMentionText(firstItem.text_unescaped,getAccountScreenName(context,firstItem.account_id)));
    bigTextStyle.setSummaryText(getAccountDisplayName(context,accountId,mNameFirst));
    notifStyle=bigTextStyle;
  }
  final int accountNotificationId=getAccountNotificationId(notificationId,accountId);
  nm.notify(accountNotificationId,notifStyle.build());
}
