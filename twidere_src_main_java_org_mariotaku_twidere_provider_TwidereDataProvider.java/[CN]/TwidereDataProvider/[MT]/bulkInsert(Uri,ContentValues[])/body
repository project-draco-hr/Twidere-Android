{
  try {
    final int tableId=getTableId(uri);
    final String table=getTableNameById(tableId);
    checkWritePermission(tableId,table);
switch (tableId) {
case TABLE_ID_DIRECT_MESSAGES_CONVERSATION:
case TABLE_ID_DIRECT_MESSAGES:
case TABLE_ID_DIRECT_MESSAGES_CONVERSATIONS_ENTRIES:
      return 0;
  }
  int result=0;
  if (table != null) {
    mDatabaseWrapper.beginTransaction();
    if (tableId == TABLE_ID_CACHED_USERS) {
      for (      final ContentValues values : valuesArray) {
        final Expression where=Expression.equals(CachedUsers.USER_ID,values.getAsLong(CachedUsers.USER_ID));
        mDatabaseWrapper.update(table,values,where.getSQL(),null);
        mDatabaseWrapper.insertWithOnConflict(table,null,values,SQLiteDatabase.CONFLICT_IGNORE);
        result++;
      }
    }
 else     if (tableId == TABLE_ID_SEARCH_HISTORY) {
      for (      final ContentValues values : valuesArray) {
        values.put(SearchHistory.RECENT_QUERY,System.currentTimeMillis());
        final Expression where=Expression.equalsArgs(SearchHistory.QUERY);
        final String[] args={values.getAsString(SearchHistory.QUERY)};
        mDatabaseWrapper.update(table,values,where.getSQL(),args);
        mDatabaseWrapper.insertWithOnConflict(table,null,values,SQLiteDatabase.CONFLICT_IGNORE);
        result++;
      }
    }
 else     if (shouldReplaceOnConflict(tableId)) {
      for (      final ContentValues values : valuesArray) {
        mDatabaseWrapper.insertWithOnConflict(table,null,values,SQLiteDatabase.CONFLICT_REPLACE);
        result++;
      }
    }
 else {
      for (      final ContentValues values : valuesArray) {
        mDatabaseWrapper.insert(table,null,values);
        result++;
      }
    }
    mDatabaseWrapper.setTransactionSuccessful();
    mDatabaseWrapper.endTransaction();
  }
  if (result > 0) {
    onDatabaseUpdated(tableId,uri);
  }
  onNewItemsInserted(uri,tableId,valuesArray);
  return result;
}
 catch (final SQLException e) {
  throw new IllegalStateException(e);
}
}
