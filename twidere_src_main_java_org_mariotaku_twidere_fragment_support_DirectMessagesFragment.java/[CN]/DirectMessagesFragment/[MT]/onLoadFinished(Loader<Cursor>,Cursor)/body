{
  if (getActivity() == null)   return;
  final boolean isEmpty=cursor != null && cursor.getCount() == 0;
  mFirstVisibleItem=-1;
  final MessageEntriesAdapter adapter=getAdapter();
  adapter.setCursor(cursor);
  adapter.setLoadMoreIndicatorVisible(false);
  adapter.setLoadMoreSupported(!isEmpty);
  adapter.setLoadMoreSupported(hasMoreData(cursor));
  final long[] accountIds=getAccountIds();
  adapter.setShowAccountsColor(accountIds.length > 1);
  setRefreshEnabled(true);
  if (accountIds.length > 0) {
    final ErrorInfoStore.DisplayErrorInfo errorInfo=ErrorInfoStore.getErrorInfo(getContext(),mErrorInfoStore.get(ErrorInfoStore.KEY_DIRECT_MESSAGES,accountIds[0]));
    if (isEmpty && errorInfo != null) {
      showError(errorInfo.getIcon(),errorInfo.getMessage());
    }
 else {
      showContent();
    }
  }
 else {
    showError(R.drawable.ic_info_accounts,getString(R.string.no_account_selected));
  }
}
