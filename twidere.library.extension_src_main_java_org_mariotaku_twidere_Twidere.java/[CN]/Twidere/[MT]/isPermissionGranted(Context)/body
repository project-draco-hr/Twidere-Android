{
  final ContentResolver resolver=context.getContentResolver();
  final PackageManager pm=context.getPackageManager();
  final String pname=context.getPackageName();
  final ApplicationInfo info;
  try {
    info=pm.getPackageInfo(pname,PackageManager.GET_META_DATA).applicationInfo;
  }
 catch (  final PackageManager.NameNotFoundException e) {
    return false;
  }
  if (info.metaData == null)   return false;
  final String[] required=parsePermissions(info.metaData.getString(METADATA_KEY_EXTENSION_PERMISSIONS));
  final Cursor c=resolver.query(TwidereDataStore.Permissions.CONTENT_URI,null,null,null,null);
  if (c == null)   return false;
  try {
    c.moveToFirst();
    final int idxPackageName=c.getColumnIndex(TwidereDataStore.Permissions.PACKAGE_NAME), idxPermissions=c.getColumnIndex(TwidereDataStore.Permissions.PERMISSION);
    while (!c.isAfterLast()) {
      if (pname.equals(c.getString(idxPackageName))) {
        final String[] permissions=parsePermissions(c.getString(idxPermissions));
        return TwidereArrayUtils.contains(permissions,required);
      }
      c.moveToNext();
    }
  }
 catch (  final SecurityException ignore) {
  }
 finally {
    c.close();
  }
  return false;
}
