{
  super.onRequestPermissionsResult(requestCode,permissions,grantResults);
  if (PermissionUtils.getPermission(permissions,grantResults,Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED || PermissionUtils.getPermission(permissions,grantResults,Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
    try {
      startLocationUpdateIfEnabled();
    }
 catch (    SecurityException e) {
    }
  }
 else {
    Toast.makeText(this,R.string.cannot_get_location,Toast.LENGTH_SHORT).show();
    final SharedPreferences.Editor editor=mPreferences.edit();
    editor.putBoolean(KEY_ATTACH_LOCATION,false);
    editor.putBoolean(KEY_ATTACH_PRECISE_LOCATION,false);
    editor.apply();
    mLocationSwitch.setValue(LOCATION_VALUE_NONE);
  }
}
