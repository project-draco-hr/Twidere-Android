{
  final boolean attachLocation=!mPreferences.getBoolean(KEY_ATTACH_LOCATION,false);
  mPreferences.edit().putBoolean(KEY_ATTACH_LOCATION,attachLocation).apply();
  if (!attachLocation && mLocationListener != null) {
    mLocationManager.removeUpdates(mLocationListener);
    mLocationListener=null;
  }
  requestOrUpdateLocation();
  updateLocationState();
  setMenu();
  updateTextCount();
}
