{
  final FragmentActivity activity=getActivity();
  final Rect insets=this.mSystemWindowsInsets;
  final SwipeRefreshLayout layout=this.mSwipeRefreshLayout;
  if (!(activity instanceof IControlBarActivity) || insets.top == 0 || layout == null || isRefreshing()) {
    return;
  }
  final int progressCircleDiameter=layout.getProgressCircleDiameter();
  if (progressCircleDiameter == 0)   return;
  final float density=getResources().getDisplayMetrics().density;
  final IControlBarActivity control=(IControlBarActivity)activity;
  final int controlBarOffsetPixels=Math.round(control.getControlBarHeight() * (1 - control.getControlBarOffset()));
  final int swipeStart=(insets.top - controlBarOffsetPixels) - progressCircleDiameter;
  final int swipeDistance=Math.round(64 * density);
  layout.setProgressViewOffset(false,swipeStart,swipeStart + swipeDistance);
}
