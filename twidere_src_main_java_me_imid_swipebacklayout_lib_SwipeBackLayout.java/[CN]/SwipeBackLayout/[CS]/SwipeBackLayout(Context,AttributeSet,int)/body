{
  super(context,attrs);
  setFitsSystemWindows(true);
  mDragHelper=ViewDragHelper.create(this,new ViewDragCallback());
  final TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.SwipeBackLayout,defStyle,R.style.SwipeBackLayout);
  final int edgeSize=a.getDimensionPixelSize(R.styleable.SwipeBackLayout_edgeSize,-1);
  if (edgeSize > 0) {
    setEdgeSize(edgeSize);
  }
  final int mode=EDGE_FLAGS[a.getInt(R.styleable.SwipeBackLayout_edgeFlag,0)];
  setEdgeTrackingEnabled(mode);
  final int shadowLeft=a.getResourceId(R.styleable.SwipeBackLayout_shadowLeft,R.drawable.shadow_left);
  final int shadowRight=a.getResourceId(R.styleable.SwipeBackLayout_shadowRight,R.drawable.shadow_right);
  final int shadowBottom=a.getResourceId(R.styleable.SwipeBackLayout_shadowBottom,R.drawable.shadow_bottom);
  final int scrimColor=a.getColor(R.styleable.SwipeBackLayout_scrimColor,DEFAULT_SCRIM_COLOR);
  final float scrimAlpha=a.getFloat(R.styleable.SwipeBackLayout_scrimAlpha,Color.alpha(scrimColor) / 255.0f);
  final float scalePercent=a.getFraction(R.styleable.SwipeBackLayout_scalePercent,1,1,1);
  setShadow(shadowLeft,EDGE_LEFT);
  setShadow(shadowRight,EDGE_RIGHT);
  setShadow(shadowBottom,EDGE_BOTTOM);
  setScalePercent(scalePercent);
  setScrimColor(scrimColor);
  setScrimAlpha(scrimAlpha);
  a.recycle();
  final float density=getResources().getDisplayMetrics().density;
  final float minVel=MIN_FLING_VELOCITY * density;
  mDragHelper.setMinVelocity(minVel);
}
