{
  final Context context=fragment.getActivity();
  final Resources res=context.getResources();
  final SharedPreferencesWrapper preferences=SharedPreferencesWrapper.getInstance(context,SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  mFragment=fragment;
  mContext=context;
  mInflater=LayoutInflater.from(context);
  mImageLoader=TwidereApplication.getInstance(context).getMediaLoaderWrapper();
  mImageLoadingHandler=new ImageLoadingHandler(R.id.media_preview_progress);
  mCardBackgroundColor=ThemeUtils.getCardBackgroundColor(context);
  mNameFirst=preferences.getBoolean(KEY_NAME_FIRST,true);
  mTextSize=preferences.getInt(KEY_TEXT_SIZE,res.getInteger(R.integer.default_text_size));
  mProfileImageStyle=Utils.getProfileImageStyle(preferences.getString(KEY_PROFILE_IMAGE_STYLE,null));
  mMediaPreviewStyle=Utils.getMediaPreviewStyle(preferences.getString(KEY_MEDIA_PREVIEW_STYLE,null));
  mIsCompact=compact;
  mDisplayProfileImage=preferences.getBoolean(KEY_DISPLAY_PROFILE_IMAGE,true);
  mDisplayMediaPreview=preferences.getBoolean(KEY_MEDIA_PREVIEW,false);
  if (compact) {
    mCardLayoutResource=R.layout.card_item_status_compact;
  }
 else {
    mCardLayoutResource=R.layout.card_item_status;
  }
  mLinkify=new TwidereLinkify(this);
}
