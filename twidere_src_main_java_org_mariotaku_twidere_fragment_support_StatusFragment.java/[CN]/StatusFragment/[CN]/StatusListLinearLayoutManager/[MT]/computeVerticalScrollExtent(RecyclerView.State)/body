{
  final int firstPosition=findFirstVisibleItemPosition();
  final int lastPosition=Math.min(getValidScrollItemCount() - 1,findLastVisibleItemPosition());
  if (firstPosition < 0 || lastPosition < 0)   return 0;
  int childCount=lastPosition - firstPosition + 1;
  if (childCount > 0) {
    if (isSmoothScrollbarEnabled()) {
      int extent=childCount * 100;
      View view=findViewByPosition(firstPosition);
      final int top=view.getTop();
      int height=view.getHeight();
      if (height > 0) {
        extent+=(top * 100) / height;
      }
      view=findViewByPosition(lastPosition);
      final int bottom=view.getBottom();
      height=view.getHeight();
      if (height > 0) {
        extent-=((bottom - getHeight()) * 100) / height;
      }
      return extent;
    }
 else {
      return 1;
    }
  }
  return 0;
}
