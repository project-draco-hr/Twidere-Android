{
  final ParcelableUsersAdapter adapter=getAdapter();
  final DividerItemDecoration itemDecoration=new DividerItemDecoration(context,((LinearLayoutManager)recyclerView.getLayoutManager()).getOrientation());
  final Resources res=context.getResources();
  if (adapter.isProfileImageEnabled()) {
    final int decorPaddingLeft=res.getDimensionPixelSize(R.dimen.element_spacing_normal) * 2 + res.getDimensionPixelSize(R.dimen.icon_size_status_profile_image);
    itemDecoration.setPadding(new DividerItemDecoration.Padding(){
      @Override public boolean get(      int position,      Rect rect){
        final int itemViewType=adapter.getItemViewType(position);
        boolean nextItemIsUser=false;
        if (position < adapter.getItemCount() - 1) {
          nextItemIsUser=adapter.getItemViewType(position + 1) == ParcelableUsersAdapter.ITEM_VIEW_TYPE_USER;
        }
        if (nextItemIsUser && itemViewType == ParcelableUsersAdapter.ITEM_VIEW_TYPE_USER) {
          rect.left=decorPaddingLeft;
        }
 else {
          rect.left=0;
        }
        return true;
      }
    }
);
  }
  itemDecoration.setDecorationEndOffset(1);
  return itemDecoration;
}
