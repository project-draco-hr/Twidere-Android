{
  Map<String,List<String>> headers=Collections.emptyMap();
  Map<String,List<String>> cookieHeaders;
  try {
    cookieHeaders=cookieHandler.get(url.uri(),headers);
  }
 catch (  IOException e) {
    Internal.logger.log(WARNING,"Loading cookies failed for " + url.resolve("/..."),e);
    return Collections.emptyList();
  }
  List<Cookie> cookies=null;
  for (  Map.Entry<String,List<String>> entry : cookieHeaders.entrySet()) {
    String key=entry.getKey();
    if (("Cookie".equalsIgnoreCase(key) || "Cookie2".equalsIgnoreCase(key)) && !entry.getValue().isEmpty()) {
      for (      String header : entry.getValue()) {
        if (cookies == null)         cookies=new ArrayList<>();
        cookies.addAll(decodeHeaderAsJavaNetCookies(url,header));
      }
    }
  }
  return cookies != null ? Collections.unmodifiableList(cookies) : Collections.<Cookie>emptyList();
}
