{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_api_editor);
  String apiUrlFormat;
  int authType;
  boolean sameOAuthSigningUrl, noVersionSuffix;
  String consumerKey, consumerSecret;
  final SharedPreferences pref=getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  final String prefApiUrlFormat=getNonEmptyString(pref,KEY_API_URL_FORMAT,DEFAULT_REST_BASE_URL);
  final int prefAuthType=pref.getInt(KEY_AUTH_TYPE,Accounts.AUTH_TYPE_OAUTH);
  final boolean prefSameOAuthSigningUrl=pref.getBoolean(KEY_SAME_OAUTH_SIGNING_URL,false);
  final boolean prefNoVersionSuffix=pref.getBoolean(KEY_NO_VERSION_SUFFIX,false);
  final String prefConsumerKey=getNonEmptyString(pref,KEY_CONSUMER_KEY,TWITTER_CONSUMER_KEY_2);
  final String prefConsumerSecret=getNonEmptyString(pref,KEY_CONSUMER_SECRET,TWITTER_CONSUMER_SECRET_2);
  if (savedInstanceState != null) {
    apiUrlFormat=trim(savedInstanceState.getString(Accounts.API_URL_FORMAT,prefApiUrlFormat));
    authType=savedInstanceState.getInt(Accounts.AUTH_TYPE,prefAuthType);
    sameOAuthSigningUrl=savedInstanceState.getBoolean(Accounts.SAME_OAUTH_SIGNING_URL,prefSameOAuthSigningUrl);
    noVersionSuffix=savedInstanceState.getBoolean(Accounts.NO_VERSION_SUFFIX,prefNoVersionSuffix);
    consumerKey=trim(savedInstanceState.getString(Accounts.CONSUMER_KEY,prefConsumerKey));
    consumerSecret=trim(savedInstanceState.getString(Accounts.CONSUMER_SECRET,prefConsumerSecret));
  }
 else {
    final Intent intent=getIntent();
    final Bundle extras=intent.getExtras();
    apiUrlFormat=trim(extras.getString(Accounts.API_URL_FORMAT,prefApiUrlFormat));
    authType=extras.getInt(Accounts.AUTH_TYPE,prefAuthType);
    sameOAuthSigningUrl=extras.getBoolean(Accounts.SAME_OAUTH_SIGNING_URL,prefSameOAuthSigningUrl);
    noVersionSuffix=extras.getBoolean(Accounts.NO_VERSION_SUFFIX,prefNoVersionSuffix);
    consumerKey=trim(extras.getString(Accounts.CONSUMER_KEY,prefConsumerKey));
    consumerSecret=trim(extras.getString(Accounts.CONSUMER_SECRET,prefConsumerSecret));
  }
  mEditAuthType.setOnCheckedChangeListener(this);
  mAdvancedAPIConfigLabel.setOnClickListener(this);
  mSaveButton.setOnClickListener(this);
  mAPIFormatHelpButton.setOnClickListener(this);
  mEditAPIUrlFormat.setText(apiUrlFormat);
  mEditSameOAuthSigningUrl.setChecked(sameOAuthSigningUrl);
  mEditNoVersionSuffix.setChecked(noVersionSuffix);
  mEditConsumerKey.setText(consumerKey);
  mEditConsumerSecret.setText(consumerSecret);
  mButtonOAuth.setChecked(authType == Accounts.AUTH_TYPE_OAUTH);
  mButtonxAuth.setChecked(authType == Accounts.AUTH_TYPE_XAUTH);
  mButtonBasic.setChecked(authType == Accounts.AUTH_TYPE_BASIC);
  mButtonTwipOMode.setChecked(authType == Accounts.AUTH_TYPE_TWIP_O_MODE);
  if (mEditAuthType.getCheckedRadioButtonId() == -1) {
    mButtonOAuth.setChecked(true);
  }
}
