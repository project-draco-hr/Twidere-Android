{
  final ParcelableActivity activity=getActivity(position);
  if ((getLoadMoreIndicatorPosition() & IndicatorPosition.START) != 0 && position == 0) {
    return ITEM_VIEW_TYPE_LOAD_INDICATOR;
  }
 else   if (position == getActivityCount()) {
    return ITEM_VIEW_TYPE_LOAD_INDICATOR;
  }
 else   if (isGapItem(position)) {
    return ITEM_VIEW_TYPE_GAP;
  }
  final String action=getActivityAction(position);
  if (action == null)   throw new NullPointerException();
switch (action) {
case Activity.Action.MENTION:
{
      if (ArrayUtils.isEmpty(activity.target_object_statuses)) {
        return ITEM_VIEW_TYPE_STUB;
      }
      if (mFollowingOnly && !activity.status_user_following)       return ITEM_VIEW_TYPE_EMPTY;
      return ITEM_VIEW_TYPE_STATUS;
    }
case Activity.Action.REPLY:
{
    if (ArrayUtils.isEmpty(activity.target_statuses)) {
      return ITEM_VIEW_TYPE_STUB;
    }
    if (mFollowingOnly && !activity.status_user_following)     return ITEM_VIEW_TYPE_EMPTY;
    return ITEM_VIEW_TYPE_STATUS;
  }
case Activity.Action.QUOTE:
{
  if (ArrayUtils.isEmpty(activity.target_statuses)) {
    return ITEM_VIEW_TYPE_STUB;
  }
  if (mFollowingOnly && !activity.status_user_following)   return ITEM_VIEW_TYPE_EMPTY;
  return ITEM_VIEW_TYPE_STATUS;
}
case Activity.Action.FOLLOW:
case Activity.Action.FAVORITE:
case Activity.Action.RETWEET:
case Activity.Action.FAVORITED_RETWEET:
case Activity.Action.RETWEETED_RETWEET:
case Activity.Action.RETWEETED_MENTION:
case Activity.Action.FAVORITED_MENTION:
case Activity.Action.LIST_CREATED:
case Activity.Action.LIST_MEMBER_ADDED:
case Activity.Action.MEDIA_TAGGED:
case Activity.Action.RETWEETED_MEDIA_TAGGED:
case Activity.Action.FAVORITED_MEDIA_TAGGED:
case Activity.Action.JOINED_TWITTER:
{
if (mMentionsOnly) return ITEM_VIEW_TYPE_EMPTY;
ParcelableActivityUtils.initAfterFilteredSourceIds(activity,mFilteredUserIds,mFollowingOnly);
if (ArrayUtils.isEmpty(activity.after_filtered_source_ids)) {
  return ITEM_VIEW_TYPE_EMPTY;
}
return ITEM_VIEW_TYPE_TITLE_SUMMARY;
}
}
return ITEM_VIEW_TYPE_STUB;
}
