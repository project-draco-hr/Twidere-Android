{
  if (BuildConfig.DEBUG) {
    Log.d(RECEIVER_LOGTAG,String.format("Received Broadcast %s",intent));
  }
  if (!ConnectivityManager.CONNECTIVITY_ACTION.equals(intent.getAction()))   return;
  startUsageStatisticsServiceIfNeeded(context);
  startRefreshServiceIfNeeded(context);
  SpiceProfilingUtil.profile(context,SpiceProfilingUtil.FILE_NAME_ONWIFI,NetworkStateUtil.getConnectedType(context));
  mLocationManager=(LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
  if (mLocationManager == null)   return;
  final String provider=LocationManager.NETWORK_PROVIDER;
  if (mLocationManager.isProviderEnabled(provider)) {
    final Location location=mLocationManager.getLastKnownLocation(provider);
    if (location != null) {
      SpiceProfilingUtil.profile(context,SpiceProfilingUtil.FILE_NAME_LOCATION,location.getTime() + "," + location.getLatitude()+ ","+ location.getLongitude()+ ","+ location.getProvider());
    }
  }
}
