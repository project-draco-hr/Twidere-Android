{
  if (BuildConfig.DEBUG) {
    Log.d(RECEIVER_LOGTAG,String.format("Received Broadcast %s",intent));
  }
  if (!ConnectivityManager.CONNECTIVITY_ACTION.equals(intent.getAction()))   return;
  ApplicationModule.get(context).reloadConnectivitySettings();
  startRefreshServiceIfNeeded(context);
  final SharedPreferences prefs=context.getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  if (prefs.getBoolean(KEY_USAGE_STATISTICS,false) && prefs.getBoolean(KEY_SETTINGS_WIZARD_COMPLETED,false)) {
    final NetworkEvent event=NetworkEvent.create(context);
    HotMobiLogger.getInstance(context).log(event);
  }
  final int networkType=Utils.getActiveNetworkType(context.getApplicationContext());
  NetworkUsageUtils.setNetworkType(networkType);
  final boolean isWifi=networkType == ConnectivityManager.TYPE_WIFI;
  final boolean isCharging=SpiceProfilingUtil.isCharging(context.getApplicationContext());
  if (isWifi && isCharging) {
    final long currentTime=System.currentTimeMillis();
    final long lastSuccessfulTime=HotMobiLogger.getLastUploadTime(context);
    if ((currentTime - lastSuccessfulTime) > HotMobiLogger.UPLOAD_INTERVAL_MILLIS) {
      AsyncTask.execute(new UploadLogsTask(context.getApplicationContext()));
    }
  }
}
