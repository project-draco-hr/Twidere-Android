{
  final BackgroundOperationService context=this;
  final Builder builder=new Builder(context);
  startForeground(NOTIFICATION_ID_UPDATE_STATUS,updateUpdateStatusNotification(context,builder,0,null));
  for (  final ParcelableStatusUpdate item : statuses) {
    final UpdateStatusTask task=new UpdateStatusTask(context,new UpdateStatusTask.StateCallback(){
      @WorkerThread @Override public void onStartUploadingMedia(){
        startForeground(NOTIFICATION_ID_UPDATE_STATUS,updateUpdateStatusNotification(context,builder,0,item));
      }
      @WorkerThread @Override public void onUploadingProgressChanged(      int index,      long current,      long total){
        int progress=(int)(current * 100 / total);
        startForeground(NOTIFICATION_ID_UPDATE_STATUS,updateUpdateStatusNotification(context,builder,progress,item));
      }
      @WorkerThread @Override public void onShorteningStatus(){
        startForeground(NOTIFICATION_ID_UPDATE_STATUS,updateUpdateStatusNotification(context,builder,0,item));
      }
      @WorkerThread @Override public void onUpdatingStatus(){
        startForeground(NOTIFICATION_ID_UPDATE_STATUS,updateUpdateStatusNotification(context,builder,0,item));
      }
      @Override public void afterExecute(      Context handler,      UpdateStatusTask.UpdateStatusResult result){
        boolean failed=false;
        if (result.exception != null) {
          Toast.makeText(context,result.exception.getMessage(),Toast.LENGTH_SHORT).show();
          failed=true;
        }
 else         for (        MicroBlogException e : result.exceptions) {
          if (e != null) {
            Toast.makeText(context,R.string.status_not_updated,Toast.LENGTH_SHORT).show();
            failed=true;
            break;
          }
        }
        if (failed) {
        }
 else {
          Toast.makeText(context,R.string.status_updated,Toast.LENGTH_SHORT).show();
        }
      }
      @Override public void beforeExecute(){
      }
    }
);
    task.setCallback(this);
    task.setParams(Pair.create(actionType,item));
    mHandler.post(new Runnable(){
      @Override public void run(){
        ManualTaskStarter.invokeBeforeExecute(task);
      }
    }
);
    final UpdateStatusTask.UpdateStatusResult result=ManualTaskStarter.invokeExecute(task);
    mHandler.post(new Runnable(){
      @Override public void run(){
        ManualTaskStarter.invokeAfterExecute(task,result);
      }
    }
);
    if (result.exception != null) {
      Log.w(LOGTAG,result.exception);
    }
 else     for (    ParcelableStatus status : result.statuses) {
      if (status == null)       continue;
      final TweetEvent event=TweetEvent.create(context,status,TimelineType.OTHER);
      event.setAction(TweetEvent.Action.TWEET);
      HotMobiLogger.getInstance(context).log(status.account_key,event);
    }
  }
  if (mPreferences.getBoolean(KEY_REFRESH_AFTER_TWEET)) {
    mHandler.post(new Runnable(){
      @Override public void run(){
        mTwitter.refreshAll();
      }
    }
);
  }
  stopForeground(false);
  mNotificationManager.cancel(NOTIFICATION_ID_UPDATE_STATUS);
}
