{
  int i=text.length();
  while (i > 0 && isToken(text.charAt(i - 1))) {
    i--;
  }
  if (i > 0 && text.charAt(i - 1) == ' ' || !(text instanceof Spanned))   return text;
  final SpannableString sp=new SpannableString(text);
  TextUtils.copySpansFrom((Spanned)text,0,text.length(),Object.class,sp,0);
  return sp;
}
