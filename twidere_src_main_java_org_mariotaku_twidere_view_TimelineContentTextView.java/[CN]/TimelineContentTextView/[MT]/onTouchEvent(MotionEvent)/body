{
switch (event.getActionMasked()) {
case MotionEvent.ACTION_DOWN:
{
      Layout layout=getLayout();
      final float x=event.getX() - getPaddingLeft() + getScrollX();
      final float y=event.getY() - getPaddingTop() + getScrollY();
      final int line=layout.getLineForVertical(Math.round(y));
      int offset=layout.getOffsetForHorizontal(line,x);
      final CharSequence text=getText();
      if (text instanceof Spannable) {
        final ClickableSpan[] spans=((Spannable)text).getSpans(offset,offset,ClickableSpan.class);
        mFirstNotLink=spans.length == 0;
      }
 else {
        mFirstNotLink=true;
      }
      break;
    }
case MotionEvent.ACTION_UP:
{
    mFirstNotLink=false;
    break;
  }
}
if (mFirstNotLink) {
super.onTouchEvent(event);
return false;
}
 else {
return super.onTouchEvent(event);
}
}
