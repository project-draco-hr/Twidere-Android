{
  super.onCreate(savedInstanceState);
  final Intent intent=getIntent();
  final Bundle extras=intent.getExtras();
  setContentView(R.layout.activity_api_editor);
  String apiUrlFormat;
  int authType;
  boolean sameOAuthSigningUrl, noVersionSuffix;
  String consumerKey, consumerSecret;
  final SharedPreferences pref=getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  final String prefApiUrlFormat=getNonEmptyString(pref,KEY_API_URL_FORMAT,DEFAULT_TWITTER_API_URL_FORMAT);
  final int prefAuthType=pref.getInt(KEY_AUTH_TYPE,ParcelableCredentials.AUTH_TYPE_OAUTH);
  final boolean prefSameOAuthSigningUrl=pref.getBoolean(KEY_SAME_OAUTH_SIGNING_URL,false);
  final boolean prefNoVersionSuffix=pref.getBoolean(KEY_NO_VERSION_SUFFIX,false);
  final String prefConsumerKey=getNonEmptyString(pref,KEY_CONSUMER_KEY,TWITTER_CONSUMER_KEY);
  final String prefConsumerSecret=getNonEmptyString(pref,KEY_CONSUMER_SECRET,TWITTER_CONSUMER_SECRET);
  final Bundle bundle;
  if (savedInstanceState != null) {
    bundle=savedInstanceState;
  }
 else   if (extras != null) {
    bundle=extras;
  }
 else {
    bundle=new Bundle();
  }
  apiUrlFormat=trim(bundle.getString(Accounts.API_URL_FORMAT,prefApiUrlFormat));
  authType=bundle.getInt(Accounts.AUTH_TYPE,prefAuthType);
  sameOAuthSigningUrl=bundle.getBoolean(Accounts.SAME_OAUTH_SIGNING_URL,prefSameOAuthSigningUrl);
  noVersionSuffix=bundle.getBoolean(Accounts.NO_VERSION_SUFFIX,prefNoVersionSuffix);
  consumerKey=trim(bundle.getString(Accounts.CONSUMER_KEY,prefConsumerKey));
  consumerSecret=trim(bundle.getString(Accounts.CONSUMER_SECRET,prefConsumerSecret));
  mEditAuthType.setOnCheckedChangeListener(this);
  mEditNoVersionSuffix.setOnCheckedChangeListener(this);
  mSaveButton.setOnClickListener(this);
  mAPIFormatHelpButton.setOnClickListener(this);
  mLoadDefaultsButton.setVisibility(View.VISIBLE);
  mLoadDefaultsButton.setOnClickListener(this);
  mEditAPIUrlFormat.setText(apiUrlFormat);
  mEditSameOAuthSigningUrl.setChecked(sameOAuthSigningUrl);
  mEditNoVersionSuffix.setChecked(noVersionSuffix);
  mEditConsumerKey.setText(consumerKey);
  mEditConsumerSecret.setText(consumerSecret);
  mButtonOAuth.setChecked(authType == ParcelableCredentials.AUTH_TYPE_OAUTH);
  mButtonXAuth.setChecked(authType == ParcelableCredentials.AUTH_TYPE_XAUTH);
  mButtonBasic.setChecked(authType == ParcelableCredentials.AUTH_TYPE_BASIC);
  mButtonTWIPOMode.setChecked(authType == ParcelableCredentials.AUTH_TYPE_TWIP_O_MODE);
  if (mEditAuthType.getCheckedRadioButtonId() == -1) {
    mButtonOAuth.setChecked(true);
  }
}
