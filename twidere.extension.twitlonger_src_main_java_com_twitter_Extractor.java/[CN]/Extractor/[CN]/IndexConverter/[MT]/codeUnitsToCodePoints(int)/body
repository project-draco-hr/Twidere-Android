{
  if (charIndex < this.charIndex) {
    codePointIndex-=text.codePointCount(charIndex,this.charIndex);
  }
 else {
    codePointIndex+=text.codePointCount(this.charIndex,charIndex);
  }
  this.charIndex=charIndex;
  if (charIndex > 0 && Character.isSupplementaryCodePoint(text.codePointAt(charIndex - 1))) {
    this.charIndex-=1;
  }
  return codePointIndex;
}
