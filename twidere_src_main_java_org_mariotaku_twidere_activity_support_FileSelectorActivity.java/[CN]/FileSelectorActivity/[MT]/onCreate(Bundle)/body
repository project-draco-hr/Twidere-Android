{
  super.onCreate(savedInstanceState);
  final Intent intent=getIntent();
  final String action=intent.getAction();
  if (!INTENT_ACTION_PICK_FILE.equals(action) && !INTENT_ACTION_PICK_DIRECTORY.equals(action)) {
    finish();
    return;
  }
  if (ActivityCompat.checkSelfPermission(this,Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this,Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED) {
    showPickFileDialog();
  }
 else   if (Build.VERSION.SDK_INT > Build.VERSION_CODES.JELLY_BEAN) {
    final String[] permissions={Manifest.permission.READ_EXTERNAL_STORAGE,Manifest.permission.WRITE_EXTERNAL_STORAGE};
    ActivityCompat.requestPermissions(this,permissions,REQUEST_REQUEST_PERMISSIONS);
  }
 else {
    finishWithDeniedMessage();
  }
}
