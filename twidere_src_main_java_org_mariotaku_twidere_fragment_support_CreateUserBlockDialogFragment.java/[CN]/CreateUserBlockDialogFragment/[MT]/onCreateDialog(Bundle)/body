{
  final FragmentActivity activity=getActivity();
  final Context wrapped=ThemeUtils.getDialogThemedContext(activity);
  final AlertDialog.Builder builder=new AlertDialog.Builder(wrapped);
  final ParcelableUser user=getUser();
  if (user != null) {
    final UserColorNameManager manager=UserColorNameManager.getInstance(activity);
    final SharedPreferencesWrapper prefs=SharedPreferencesWrapper.getInstance(activity,SharedPreferencesWrapper.SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE,SharedPreferenceConstants.class);
    final boolean nameFirst=prefs.getBoolean(KEY_NAME_FIRST);
    final String displayName=manager.getDisplayName(user,nameFirst,false);
    builder.setTitle(getString(R.string.block_user,displayName));
    builder.setMessage(getString(R.string.block_user_confirm_message,displayName));
  }
  builder.setPositiveButton(android.R.string.ok,this);
  builder.setNegativeButton(android.R.string.cancel,null);
  return builder.create();
}
