{
  dismissDialogFragment(FRAGMENT_TAG_SIGN_IN_PROGRESS);
  if (result != null) {
    if (result.alreadyLoggedIn) {
      final ContentValues values=result.toContentValues();
      if (values != null) {
        final String where=Expression.equalsArgs(Accounts.ACCOUNT_KEY).getSQL();
        final String[] whereArgs={values.getAsString(Accounts.ACCOUNT_KEY)};
        mResolver.update(Accounts.CONTENT_URI,values,where,whereArgs);
      }
      Toast.makeText(this,R.string.error_already_logged_in,Toast.LENGTH_SHORT).show();
    }
 else     if (result.succeed) {
      final ContentValues values=result.toContentValues();
      if (values != null) {
        mResolver.insert(Accounts.CONTENT_URI,values);
      }
      final Intent intent=new Intent(this,HomeActivity.class);
      intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
      startActivity(intent);
      finish();
    }
 else {
      if (BuildConfig.DEBUG) {
        Log.w(LOGTAG,result.exception);
      }
      if (result.exception instanceof AuthenticityTokenException) {
        Toast.makeText(this,R.string.wrong_api_key,Toast.LENGTH_SHORT).show();
      }
 else       if (result.exception instanceof WrongUserPassException) {
        Toast.makeText(this,R.string.wrong_username_password,Toast.LENGTH_SHORT).show();
      }
 else       if (result.exception instanceof SignInTask.WrongBasicCredentialException) {
        Toast.makeText(this,R.string.wrong_username_password,Toast.LENGTH_SHORT).show();
      }
 else       if (result.exception instanceof SignInTask.WrongAPIURLFormatException) {
        Toast.makeText(this,R.string.wrong_api_key,Toast.LENGTH_SHORT).show();
      }
 else       if (result.exception instanceof LoginVerificationException) {
        Toast.makeText(this,R.string.login_verification_failed,Toast.LENGTH_SHORT).show();
      }
 else       if (result.exception instanceof AuthenticationException) {
        Utils.showErrorMessage(this,getString(R.string.action_signing_in),result.exception.getCause(),true);
      }
 else {
        Utils.showErrorMessage(this,getString(R.string.action_signing_in),result.exception,true);
      }
    }
  }
  setSignInButton();
}
