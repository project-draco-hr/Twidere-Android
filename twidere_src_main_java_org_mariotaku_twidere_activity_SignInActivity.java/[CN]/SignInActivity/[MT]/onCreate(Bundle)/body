{
  super.onCreate(savedInstanceState);
  mResolver=getContentResolver();
  setContentView(R.layout.activity_sign_in);
  if (savedInstanceState != null) {
    mAPIUrlFormat=savedInstanceState.getString(Accounts.API_URL_FORMAT);
    mAuthType=savedInstanceState.getInt(Accounts.AUTH_TYPE);
    mSameOAuthSigningUrl=savedInstanceState.getBoolean(Accounts.SAME_OAUTH_SIGNING_URL);
    mConsumerKey=Utils.trim(savedInstanceState.getString(Accounts.CONSUMER_KEY));
    mConsumerSecret=Utils.trim(savedInstanceState.getString(Accounts.CONSUMER_SECRET));
    mAPIChangeTimestamp=savedInstanceState.getLong(EXTRA_API_LAST_CHANGE);
  }
  final boolean isTwipOMode=mAuthType == AuthType.TWIP_O_MODE;
  mUsernamePasswordContainer.setVisibility(isTwipOMode ? View.GONE : View.VISIBLE);
  mSignInSignUpContainer.setOrientation(isTwipOMode ? LinearLayout.VERTICAL : LinearLayout.HORIZONTAL);
  mEditUsername.addTextChangedListener(this);
  mEditPassword.addTextChangedListener(this);
  mSignInButton.setOnClickListener(this);
  mSignUpButton.setOnClickListener(this);
  mPasswordSignInButton.setOnClickListener(this);
  final ColorStateList color=ColorStateList.valueOf(ContextCompat.getColor(this,R.color.material_light_green));
  ViewCompat.setBackgroundTintList(mSignInButton,color);
  final String consumerKey=mPreferences.getString(KEY_CONSUMER_KEY,null);
  final String consumerSecret=mPreferences.getString(KEY_CONSUMER_SECRET,null);
  if (BuildConfig.SHOW_CUSTOM_TOKEN_DIALOG && savedInstanceState == null && !mPreferences.getBoolean(KEY_CONSUMER_KEY_SECRET_SET,false) && !Utils.isCustomConsumerKeySecret(consumerKey,consumerSecret)) {
    final SetConsumerKeySecretDialogFragment df=new SetConsumerKeySecretDialogFragment();
    df.setCancelable(false);
    df.show(getSupportFragmentManager(),"set_consumer_key_secret");
  }
  updateSignInType();
  setSignInButton();
}
