{
  final AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  builder.setView(R.layout.dialog_set_consumer_key_secret);
  builder.setPositiveButton(android.R.string.ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      final EditText editConsumerKey=(EditText)((Dialog)dialog).findViewById(R.id.consumer_key);
      final EditText editConsumerSecret=(EditText)((Dialog)dialog).findViewById(R.id.consumer_secret);
      final SharedPreferences prefs=SharedPreferencesWrapper.getInstance(getActivity(),SHARED_PREFERENCES_NAME,MODE_PRIVATE);
      final SharedPreferences.Editor editor=prefs.edit();
      editor.putString(KEY_CONSUMER_KEY,ParseUtils.parseString(editConsumerKey.getText()));
      editor.putString(KEY_CONSUMER_SECRET,ParseUtils.parseString(editConsumerSecret.getText()));
      editor.apply();
    }
  }
);
  final AlertDialog dialog=builder.create();
  dialog.setOnShowListener(new DialogInterface.OnShowListener(){
    @Override public void onShow(    DialogInterface dialog){
      final FragmentActivity activity=getActivity();
      if (activity == null)       return;
      final MaterialEditText editConsumerKey=(MaterialEditText)((Dialog)dialog).findViewById(R.id.consumer_key);
      final MaterialEditText editConsumerSecret=(MaterialEditText)((Dialog)dialog).findViewById(R.id.consumer_secret);
      editConsumerKey.addValidator(new ConsumerKeySecretValidator(getString(R.string.invalid_consumer_key)));
      editConsumerSecret.addValidator(new ConsumerKeySecretValidator(getString(R.string.invalid_consumer_secret)));
      final SharedPreferences prefs=SharedPreferencesWrapper.getInstance(activity,SHARED_PREFERENCES_NAME,MODE_PRIVATE);
      editConsumerKey.setText(prefs.getString(KEY_CONSUMER_KEY,null));
      editConsumerSecret.setText(prefs.getString(KEY_CONSUMER_SECRET,null));
    }
  }
);
  return dialog;
}
