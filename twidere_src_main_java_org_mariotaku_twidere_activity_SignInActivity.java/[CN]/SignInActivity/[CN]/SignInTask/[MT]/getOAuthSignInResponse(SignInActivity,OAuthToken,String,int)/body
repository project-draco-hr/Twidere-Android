{
  final OAuthAuthorization auth=new OAuthAuthorization(consumerKey.getOauthToken(),consumerKey.getOauthTokenSecret(),accessToken);
  final Endpoint endpoint=MicroBlogAPIFactory.getOAuthRestEndpoint(apiUrlFormat,sameOAuthSigningUrl,noVersionSuffix);
  final MicroBlog twitter=MicroBlogAPIFactory.getInstance(activity,endpoint,auth,MicroBlog.class);
  final User user=twitter.verifyCredentials();
  int color=analyseUserProfileColor(user);
  final Pair<String,String> accountType=detectAccountType(twitter,user);
  final ParcelableAccount account=ParcelableAccountUtils.getAccount(activity,new UserKey(userId,UserKeyUtils.getUserHost(user)));
  if (account != null) {
    color=account.color;
  }
  return new SignInResponse(account != null,auth,user,authType,color,apiUrlFormat,sameOAuthSigningUrl,noVersionSuffix,accountType);
}
