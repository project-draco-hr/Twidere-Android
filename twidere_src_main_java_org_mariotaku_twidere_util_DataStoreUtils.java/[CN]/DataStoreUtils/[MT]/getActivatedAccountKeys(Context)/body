{
  if (context == null)   return new AccountKey[0];
  final Cursor cur=context.getContentResolver().query(Accounts.CONTENT_URI,new String[]{Accounts.ACCOUNT_ID,Accounts.ACCOUNT_HOST},Accounts.IS_ACTIVATED + " = 1",null,null);
  if (cur == null)   return new AccountKey[0];
  try {
    cur.moveToFirst();
    final AccountKey[] ids=new AccountKey[cur.getCount()];
    int i=0;
    while (!cur.isAfterLast()) {
      ids[i++]=new AccountKey(cur.getLong(0),cur.getString(1));
      cur.moveToNext();
    }
    return ids;
  }
  finally {
    cur.close();
  }
}
