{
  final ParcelableActivity activity=getActivity(position);
  if (position == getActivityCount()) {
    return ITEM_VIEW_TYPE_LOAD_INDICATOR;
  }
 else   if (isGapItem(position)) {
    return ITEM_VIEW_TYPE_GAP;
  }
  final String action=getActivityAction(position);
  if (Activity.Action.MENTION.literal.equals(action)) {
    if (ArrayUtils.isEmpty(activity.target_object_statuses)) {
      return ITEM_VIEW_TYPE_STUB;
    }
    return ITEM_VIEW_TYPE_STATUS;
  }
 else   if (Activity.Action.REPLY.literal.equals(action)) {
    if (ArrayUtils.isEmpty(activity.target_statuses)) {
      return ITEM_VIEW_TYPE_STUB;
    }
    return ITEM_VIEW_TYPE_STATUS;
  }
 else   if (Activity.Action.QUOTE.literal.equals(action)) {
    if (ArrayUtils.isEmpty(activity.target_statuses)) {
      return ITEM_VIEW_TYPE_STUB;
    }
    return ITEM_VIEW_TYPE_STATUS;
  }
 else   if (Activity.Action.FOLLOW.literal.equals(action) || Activity.Action.FAVORITE.literal.equals(action) || Activity.Action.RETWEET.literal.equals(action)|| Activity.Action.FAVORITED_RETWEET.literal.equals(action)|| Activity.Action.RETWEETED_RETWEET.literal.equals(action)|| Activity.Action.RETWEETED_MENTION.literal.equals(action)|| Activity.Action.FAVORITED_MENTION.literal.equals(action)|| Activity.Action.LIST_CREATED.literal.equals(action)|| Activity.Action.LIST_MEMBER_ADDED.literal.equals(action)) {
    if (activity.filtered_source_ids == null) {
      if (!ArrayUtils.isEmpty(mFilteredUserIds)) {
        ArrayLongList list=new ArrayLongList();
        for (        long id : ArrayUtils.nullToEmpty(activity.source_ids)) {
          if (!ArrayUtils.contains(mFilteredUserIds,id)) {
            list.add(id);
          }
        }
        activity.filtered_source_ids=list.toArray();
      }
 else {
        activity.filtered_source_ids=activity.source_ids;
      }
    }
    if (ArrayUtils.isEmpty(activity.filtered_source_ids)) {
      return ITEM_VIEW_TYPE_EMPTY;
    }
    return ITEM_VIEW_TYPE_TITLE_SUMMARY;
  }
  return ITEM_VIEW_TYPE_STUB;
}
