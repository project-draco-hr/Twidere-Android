{
  final Context wrapped=ThemeUtils.getDialogThemedContext(getActivity());
  final AlertDialog.Builder builder=new AlertDialog.Builder(wrapped);
  final Context context=builder.getContext();
  final SharedPreferencesWrapper preferences=SharedPreferencesWrapper.getInstance(context,SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  final MediaLoaderWrapper loader=TwidereApplication.getInstance(context).getImageLoaderWrapper();
  final ImageLoadingHandler handler=new ImageLoadingHandler(R.id.media_preview_progress);
  final AsyncTwitterWrapper twitter=getTwitterWrapper();
  final LayoutInflater inflater=LayoutInflater.from(context);
  @SuppressLint("InflateParams") final View view=inflater.inflate(R.layout.dialog_scrollable_status,null);
  final StatusViewHolder holder=new StatusViewHolder(view.findViewById(R.id.item_content));
  final int profileImageStyle=Utils.getProfileImageStyle(preferences.getString(KEY_PROFILE_IMAGE_STYLE,null));
  final int mediaPreviewStyle=Utils.getMediaPreviewStyle(preferences.getString(KEY_MEDIA_PREVIEW_STYLE,null));
  final boolean nameFirst=preferences.getBoolean(KEY_NAME_FIRST,true);
  final boolean displayProfileImage=preferences.getBoolean(KEY_DISPLAY_PROFILE_IMAGE,true);
  final boolean displayMediaPreview=preferences.getBoolean(KEY_MEDIA_PREVIEW,false);
  final ParcelableStatus status=getStatus();
  builder.setView(view);
  builder.setTitle(R.string.retweet_quote_confirm_title);
  builder.setPositiveButton(isMyRetweet(status) ? R.string.cancel_retweet : R.string.retweet,this);
  builder.setNeutralButton(R.string.quote,this);
  builder.setNegativeButton(android.R.string.cancel,null);
  holder.displayStatus(context,loader,handler,twitter,displayProfileImage,displayMediaPreview,true,true,nameFirst,profileImageStyle,mediaPreviewStyle,status,null,true);
  view.findViewById(R.id.item_menu).setVisibility(View.GONE);
  view.findViewById(R.id.action_buttons).setVisibility(View.GONE);
  return builder.create();
}
