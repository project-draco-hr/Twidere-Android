{
  supportRequestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  supportRequestWindowFeature(WindowCompat.FEATURE_ACTION_BAR);
  super.onCreate(savedInstanceState);
  mPreferences=getSharedPreferences(SHARED_PREFERENCES_NAME,MODE_PRIVATE);
  mResolver=getContentResolver();
  mApplication=TwidereApplication.getInstance(this);
  setContentView(R.layout.activity_sign_in);
  setSupportProgressBarIndeterminateVisibility(false);
  final long[] account_ids=getActivatedAccountIds(this);
  final ActionBar actionBar=getSupportActionBar();
  if (actionBar != null) {
    actionBar.setDisplayHomeAsUpEnabled(account_ids.length > 0);
  }
  if (savedInstanceState != null) {
    mAPIUrlFormat=savedInstanceState.getString(Accounts.API_URL_FORMAT);
    mAuthType=savedInstanceState.getInt(Accounts.AUTH_TYPE);
    mSameOAuthSigningUrl=savedInstanceState.getBoolean(Accounts.SAME_OAUTH_SIGNING_URL);
    mConsumerKey=trim(savedInstanceState.getString(Accounts.CONSUMER_KEY));
    mConsumerSecret=trim(savedInstanceState.getString(Accounts.CONSUMER_SECRET));
    mUsername=savedInstanceState.getString(Accounts.SCREEN_NAME);
    mPassword=savedInstanceState.getString(Accounts.PASSWORD);
    mAPIChangeTimestamp=savedInstanceState.getLong(EXTRA_API_LAST_CHANGE);
  }
  mUsernamePasswordContainer.setVisibility(mAuthType == Accounts.AUTH_TYPE_TWIP_O_MODE ? View.GONE : View.VISIBLE);
  mSigninSignupContainer.setOrientation(mAuthType == Accounts.AUTH_TYPE_TWIP_O_MODE ? LinearLayout.VERTICAL : LinearLayout.HORIZONTAL);
  mEditUsername.setText(mUsername);
  mEditUsername.addTextChangedListener(this);
  mEditPassword.setText(mPassword);
  mEditPassword.addTextChangedListener(this);
  final Resources resources=getResources();
  final ColorStateList color=ColorStateList.valueOf(resources.getColor(R.color.material_light_green));
  ViewCompat.setBackgroundTintList(mSignInButton,color);
  setSignInButton();
}
