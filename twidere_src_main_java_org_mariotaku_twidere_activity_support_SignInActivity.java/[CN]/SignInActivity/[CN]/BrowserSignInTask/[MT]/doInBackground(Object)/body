{
  try {
    final TwitterOAuth oauth=new TwitterFactory(conf).getInstance(new OAuthAuthorization(conf.getOAuthConsumerKey(),conf.getOAuthConsumerSecret()),TwitterOAuth.class);
    final OAuthToken accessToken=oauth.getAccessToken(new OAuthToken(requestToken,requestTokenSecret),oauthVerifier);
    final long userId=accessToken.getUserId();
    if (userId <= 0)     return new SignInResponse(false,false,null);
    final Twitter twitter=new TwitterFactory(conf).getInstance(new OAuthAuthorization(conf.getOAuthConsumerKey(),conf.getOAuthConsumerSecret(),accessToken),Twitter.class);
    final User user=twitter.verifyCredentials();
    if (isUserLoggedIn(context,userId))     return new SignInResponse(true,false,null);
    final int color=analyseUserProfileColor(user);
    return new SignInResponse(conf,accessToken,user,Accounts.AUTH_TYPE_OAUTH,color,apiUrlFormat,sameOauthSigningUrl,noVersionSuffix);
  }
 catch (  final TwitterException e) {
    return new SignInResponse(false,false,e);
  }
}
