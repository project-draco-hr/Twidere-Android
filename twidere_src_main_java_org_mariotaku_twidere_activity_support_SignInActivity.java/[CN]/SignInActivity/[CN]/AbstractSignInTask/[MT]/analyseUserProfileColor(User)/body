{
  if (user == null)   throw new TwitterException("Unable to get user info");
  final HttpClientWrapper client=new HttpClientWrapper(conf);
  final String profileImageUrl=ParseUtils.parseString(user.getProfileImageURL());
  final HttpResponse conn=profileImageUrl != null ? client.get(profileImageUrl,null) : null;
  final Bitmap bm=conn != null ? BitmapFactory.decodeStream(conn.asStream()) : null;
  final int profileBackgroundColor=getProfileBackgroundColor(user.getProfileBackgroundColor());
  if (bm == null)   return profileBackgroundColor;
  try {
    return Palette.generate(bm).getVibrantColor(profileBackgroundColor);
  }
  finally {
    bm.recycle();
  }
}
