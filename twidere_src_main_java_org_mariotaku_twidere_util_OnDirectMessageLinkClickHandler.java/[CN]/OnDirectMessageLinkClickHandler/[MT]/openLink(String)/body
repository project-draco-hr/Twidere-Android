{
  if (link == null || activity == null || manager.isActive())   return;
  if (!hasShortenedLinks(link)) {
    super.openLink(link);
    return;
  }
  final SharedPreferences prefs=activity.getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  if (activity instanceof FragmentActivity && prefs.getBoolean(KEY_PHISHING_LINK_WARNING,true)) {
    final FragmentManager fm=((FragmentActivity)activity).getSupportFragmentManager();
    final DialogFragment fragment=new PhishingLinkWarningDialogFragment();
    final Bundle args=new Bundle();
    args.putParcelable(EXTRA_URI,Uri.parse(link));
    fragment.setArguments(args);
    fragment.show(fm,"phishing_link_warning");
  }
 else {
    super.openLink(link);
  }
}
