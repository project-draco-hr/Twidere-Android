{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_quick_search_bar);
  final List<ParcelableCredentials> accounts=DataStoreUtils.getCredentialsList(this,false);
  final AccountsSpinnerAdapter accountsSpinnerAdapter=new AccountsSpinnerAdapter(this,R.layout.spinner_item_account_icon);
  accountsSpinnerAdapter.setDropDownViewResource(R.layout.list_item_user);
  accountsSpinnerAdapter.addAll(accounts);
  mAccountSpinner.setAdapter(accountsSpinnerAdapter);
  mAccountSpinner.setOnItemSelectedListener(this);
  if (savedInstanceState == null) {
    final Intent intent=getIntent();
    final AccountKey accountKey=intent.getParcelableExtra(EXTRA_ACCOUNT_KEY);
    final int index=accountsSpinnerAdapter.findItemPosition(System.identityHashCode(accountKey));
    if (index != -1) {
      mAccountSpinner.setSelection(index);
    }
  }
  mMainContent.setOnFitSystemWindowsListener(this);
  mUsersSearchAdapter=new SuggestionsAdapter(this);
  mSuggestionsList.setAdapter(mUsersSearchAdapter);
  mSuggestionsList.setOnItemClickListener(this);
  final SwipeDismissListViewTouchListener listener=new SwipeDismissListViewTouchListener(mSuggestionsList,this);
  mSuggestionsList.setOnTouchListener(listener);
  mSuggestionsList.setOnScrollListener(listener.makeScrollListener());
  mSearchSubmit.setOnClickListener(this);
  EditTextEnterHandler.attach(mSearchQuery,new EnterListener(){
    @Override public boolean shouldCallListener(){
      return true;
    }
    @Override public boolean onHitEnter(){
      doSearch();
      return true;
    }
  }
,true);
  mSearchQuery.addTextChangedListener(new TextWatcher(){
    @Override public void beforeTextChanged(    CharSequence s,    int start,    int count,    int after){
    }
    @Override public void onTextChanged(    CharSequence s,    int start,    int before,    int count){
      mTextChanged=true;
    }
    @Override public void afterTextChanged(    Editable s){
      getSupportLoaderManager().restartLoader(0,null,QuickSearchBarActivity.this);
    }
  }
);
  getSupportLoaderManager().initLoader(0,null,this);
}
