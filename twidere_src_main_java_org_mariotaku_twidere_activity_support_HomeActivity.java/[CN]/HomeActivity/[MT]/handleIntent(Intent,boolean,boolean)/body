{
  intent.setExtrasClassLoader(getClassLoader());
  setIntent(new Intent(this,HomeActivity.class));
  final String action=intent.getAction();
  if (Intent.ACTION_SEARCH.equals(action)) {
    final String query=intent.getStringExtra(SearchManager.QUERY);
    final Bundle appSearchData=intent.getBundleExtra(SearchManager.APP_DATA);
    final AccountKey accountKey;
    if (appSearchData != null && appSearchData.containsKey(EXTRA_ACCOUNT_KEY)) {
      accountKey=appSearchData.getParcelable(EXTRA_ACCOUNT_KEY);
    }
 else {
      accountKey=Utils.getDefaultAccountKey(this);
    }
    Utils.openSearch(this,accountKey,query);
    return -1;
  }
  final boolean refreshOnStart=mPreferences.getBoolean(KEY_REFRESH_ON_START,false);
  final long[] refreshedIds=intent.getLongArrayExtra(EXTRA_REFRESH_IDS);
  if (refreshedIds != null) {
    mTwitterWrapper.refreshAll(refreshedIds);
  }
 else   if (handleExtraIntent && refreshOnStart) {
    mTwitterWrapper.refreshAll();
  }
  final Uri uri=intent.getData();
  @CustomTabType final String tabType=uri != null ? Utils.matchTabType(uri) : null;
  int initialTab=-1;
  if (tabType != null) {
    final long accountId=NumberUtils.toLong(uri.getQueryParameter(QUERY_PARAM_ACCOUNT_ID),-1);
    for (int i=0, j=mPagerAdapter.getCount(); i < j; i++) {
      final SupportTabSpec tab=mPagerAdapter.getTab(i);
      if (tabType.equals(CustomTabUtils.getTabTypeAlias(tab.type))) {
        if (tab.args != null && CustomTabUtils.hasAccountId(tab.args,getActivatedAccountKeys(),accountId)) {
          initialTab=i;
          break;
        }
      }
    }
  }
  final Intent extraIntent=intent.getParcelableExtra(EXTRA_EXTRA_INTENT);
  if (extraIntent != null && handleExtraIntent) {
    extraIntent.setExtrasClassLoader(getClassLoader());
    startActivity(extraIntent);
  }
  return initialTab;
}
