{
  if (mViewPager == null || mPagerAdapter == null)   return false;
  final boolean useBottomActionItems=FlymeUtils.hasSmartBar() && isBottomComposeButton();
  setMenuItemAvailability(menu,MENU_ACTIONS,useBottomActionItems);
  setMenuItemAvailability(menu,MENU_PROGRESS,useBottomActionItems);
  if (useBottomActionItems) {
    final int icon, title;
    final int position=mViewPager.getCurrentItem();
    final SupportTabSpec tab=mPagerAdapter.getTab(position);
    if (tab == null) {
      title=R.string.compose;
      icon=R.drawable.ic_iconic_action_compose;
    }
 else {
      if (classEquals(DirectMessagesFragment.class,tab.cls)) {
        icon=R.drawable.ic_iconic_action_new_message;
        title=R.string.new_direct_message;
      }
 else       if (classEquals(TrendsSuggectionsFragment.class,tab.cls)) {
        icon=R.drawable.ic_iconic_action_search;
        title=android.R.string.search_go;
      }
 else {
        icon=R.drawable.ic_iconic_action_compose;
        title=R.string.compose;
      }
    }
    final MenuItem actionsItem=menu.findItem(MENU_ACTIONS);
    actionsItem.setIcon(icon);
    actionsItem.setTitle(title);
  }
  return true;
}
