{
  final Window window=getWindow();
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
    window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);
  }
  super.onCreate(savedInstanceState);
  if (!isDatabaseReady(this)) {
    Toast.makeText(this,R.string.preparing_database_toast,Toast.LENGTH_SHORT).show();
    finish();
    return;
  }
  mPreferences=getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_PRIVATE);
  mTwitterWrapper=getTwitterWrapper();
  final TwidereApplication app=TwidereApplication.getInstance(this);
  mReadStateManager=app.getReadStateManager();
  mNotificationManager=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);
  mMultiSelectHandler=new MultiSelectEventHandler(this);
  mMultiSelectHandler.dispatchOnCreate();
  final Intent intent=getIntent();
  if (openSettingsWizard()) {
    finish();
    return;
  }
  setContentView(R.layout.activity_home);
  setSupportActionBar(mActionBar);
  sendBroadcast(new Intent(BROADCAST_HOME_ACTIVITY_ONCREATE));
  final boolean refreshOnStart=mPreferences.getBoolean(KEY_REFRESH_ON_START,false);
  mTabDisplayOption=getTabDisplayOptionInt(this);
  mTabColumns=getResources().getInteger(R.integer.default_tab_columns);
  mColorStatusFrameLayout.setOnFitSystemWindowsListener(this);
  mPagerAdapter=new SupportTabsAdapter(this,getSupportFragmentManager(),mTabIndicator,mTabColumns);
  mViewPager.setAdapter(mPagerAdapter);
  mTabIndicator.setViewPager(mViewPager);
  mTabIndicator.setOnPageChangeListener(this);
  mTabIndicator.setColumns(mTabColumns);
  if (mTabDisplayOption != 0) {
    mTabIndicator.setTabDisplayOption(mTabDisplayOption);
  }
 else {
    mTabIndicator.setTabDisplayOption(TabPagerIndicator.ICON);
  }
  mTabIndicator.setDisplayBadge(mPreferences.getBoolean(KEY_UNREAD_COUNT,true));
  mActionsButton.setOnClickListener(this);
  mActionsButton.setOnLongClickListener(this);
  mEmptyTabHint.setOnClickListener(this);
  ThemeUtils.setCompatContentViewOverlay(this,new EmptyDrawable());
  ViewCompat.setElevation(mActionBarContainer,ThemeUtils.getSupportActionBarElevation(this));
  ViewSupport.setOutlineProvider(mActionBarContainer,ViewOutlineProviderCompat.BACKGROUND);
  final View windowOverlay=findViewById(R.id.window_overlay);
  ViewSupport.setBackground(windowOverlay,ThemeUtils.getNormalWindowContentOverlay(this,getCurrentThemeResourceId()));
  setupSlidingMenu();
  setupBars();
  showDataProfilingRequest();
  initUnreadCount();
  updateActionsButton();
  updateSlidingMenuTouchMode();
  getDelegate().setKeyListener(new ThemedAppCompatDelegateFactory.KeyListener(){
    @Override public boolean onKeyDown(    int keyCode,    KeyEvent event){
      return false;
    }
    @Override public boolean onKeyUp(    int keyCode,    KeyEvent event){
switch (keyCode) {
case KeyEvent.KEYCODE_MENU:
{
          if (mSlidingMenu != null) {
            mSlidingMenu.toggle(true);
            return true;
          }
          break;
        }
    }
    return false;
  }
}
);
if (savedInstanceState == null) {
  if (refreshOnStart) {
    mTwitterWrapper.refreshAll(getActivatedAccountIds());
  }
  if (intent.getBooleanExtra(EXTRA_OPEN_ACCOUNTS_DRAWER,false)) {
    openAccountsDrawer();
  }
}
setupHomeTabs();
final int initialTabPosition=handleIntent(intent,savedInstanceState == null);
setTabPosition(initialTabPosition);
}
