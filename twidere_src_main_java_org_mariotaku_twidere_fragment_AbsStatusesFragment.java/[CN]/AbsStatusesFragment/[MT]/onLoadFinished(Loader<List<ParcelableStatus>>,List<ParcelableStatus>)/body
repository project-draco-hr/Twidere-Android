{
  final ParcelableStatusesAdapter adapter=getAdapter();
  final boolean rememberPosition=mPreferences.getBoolean(KEY_REMEMBER_POSITION,false);
  final boolean readFromBottom=mPreferences.getBoolean(KEY_READ_FROM_BOTTOM,false);
  long lastReadPositionKey;
  final int lastVisiblePos, lastVisibleTop;
  final String tag=getCurrentReadPositionTag();
  final LinearLayoutManager layoutManager=getLayoutManager();
  if (readFromBottom) {
    lastVisiblePos=layoutManager.findLastVisibleItemPosition();
  }
 else {
    lastVisiblePos=layoutManager.findFirstVisibleItemPosition();
  }
  if (lastVisiblePos != RecyclerView.NO_POSITION && lastVisiblePos < adapter.getItemCount()) {
    final int statusStartIndex=adapter.getStatusStartIndex();
    final int statusEndIndex=statusStartIndex + adapter.getStatusCount();
    final int lastItemIndex=Math.min(statusEndIndex,lastVisiblePos);
    lastReadPositionKey=adapter.getStatusPositionKey(lastItemIndex);
    final View positionView=layoutManager.findViewByPosition(lastItemIndex);
    lastVisibleTop=positionView != null ? positionView.getTop() : 0;
  }
 else   if (rememberPosition && tag != null) {
    lastReadPositionKey=mReadStateManager.getPosition(tag);
    lastVisibleTop=0;
  }
 else {
    lastReadPositionKey=-1;
    lastVisibleTop=0;
  }
  adapter.setData(data);
  final int statusStartIndex=adapter.getStatusStartIndex();
  final int statusEndExclusiveIndex=statusStartIndex + adapter.getStatusCount();
  if (statusEndExclusiveIndex >= 0 && rememberPosition && tag != null) {
    final long lastPositionKey=adapter.getStatusPositionKey(statusEndExclusiveIndex - 1);
    if (lastPositionKey != -1 && lastReadPositionKey > 0 && lastReadPositionKey < lastPositionKey) {
      lastReadPositionKey=lastPositionKey;
    }
  }
  setRefreshEnabled(true);
  if (!(loader instanceof IExtendedLoader) || ((IExtendedLoader)loader).isFromUser()) {
    if (hasMoreData(data)) {
      adapter.setLoadMoreSupportedPosition(IndicatorPosition.END);
      onHasMoreDataChanged(true);
    }
 else {
      adapter.setLoadMoreSupportedPosition(IndicatorPosition.NONE);
      onHasMoreDataChanged(false);
    }
    int pos=-1;
    for (int i=statusStartIndex; i < statusEndExclusiveIndex; i++) {
      if (lastReadPositionKey != -1 && adapter.getStatusPositionKey(i) <= lastReadPositionKey) {
        pos=i;
        break;
      }
    }
    if (pos != -1 && adapter.isStatus(pos) && (readFromBottom || lastVisiblePos != 0)) {
      if (layoutManager.getHeight() == 0) {
        layoutManager.scrollToPositionWithOffset(pos,lastVisibleTop);
      }
 else {
        layoutManager.scrollToPositionWithOffset(pos,lastVisibleTop - layoutManager.getPaddingTop());
      }
    }
  }
 else {
    onHasMoreDataChanged(false);
  }
  if (loader instanceof IExtendedLoader) {
    ((IExtendedLoader)loader).setFromUser(false);
  }
  onLoadingFinished();
}
