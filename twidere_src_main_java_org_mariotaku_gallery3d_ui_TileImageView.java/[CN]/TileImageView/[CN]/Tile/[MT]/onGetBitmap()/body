{
  GalleryUtils.assertTrue(mTileState == STATE_DECODED);
  final int rightEdge=(mImageWidth - mX >> mTileLevel) + TILE_BORDER;
  final int bottomEdge=(mImageHeight - mY >> mTileLevel) + TILE_BORDER;
  setSize(Math.min(BITMAP_SIZE,rightEdge),Math.min(BITMAP_SIZE,bottomEdge));
  final Bitmap bitmap=mDecodedTile;
  mDecodedTile=null;
  mTileState=STATE_ACTIVATED;
  return bitmap;
}
