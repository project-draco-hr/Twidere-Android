{
  final RectF source=mSourceRect;
  final RectF target=mTargetRect;
  target.set(x,y,x + length,y + length);
  source.set(0,0,TILE_SIZE,TILE_SIZE);
  final Tile tile=getTile(tx,ty,level);
  if (tile != null) {
    if (!tile.isContentValid()) {
      if (tile.mTileState == STATE_DECODED) {
        if (mUploadQuota > 0) {
          --mUploadQuota;
          tile.updateContent(canvas);
        }
 else {
          mRenderComplete=false;
        }
      }
 else       if (tile.mTileState != STATE_DECODE_FAIL) {
        mRenderComplete=false;
        queueForDecode(tile);
      }
    }
    if (drawTile(tile,canvas,source,target))     return;
  }
  if (mScreenNail != null) {
    final int size=TILE_SIZE << level;
    final float scaleX=(float)mScreenNail.getWidth() / mImageWidth;
    final float scaleY=(float)mScreenNail.getHeight() / mImageHeight;
    source.set(tx * scaleX,ty * scaleY,(tx + size) * scaleX,(ty + size) * scaleY);
    mScreenNail.draw(canvas,source,target);
  }
}
