{
  final Context wrapped=ThemeUtils.getDialogThemedContext(getActivity());
  final AlertDialog.Builder builder=new AlertDialog.Builder(wrapped);
  mFilterItems=getFilterItemsInfo();
  final String[] entries=new String[mFilterItems.length];
  for (int i=0, j=entries.length; i < j; i++) {
    final FilterItemInfo info=mFilterItems[i];
switch (info.type) {
case FilterItemInfo.FILTER_TYPE_USER:
      entries[i]=getString(R.string.user_filter_name,getName(info.value));
    break;
case FilterItemInfo.FILTER_TYPE_KEYWORD:
  entries[i]=getString(R.string.keyword_filter_name,getName(info.value));
break;
case FilterItemInfo.FILTER_TYPE_SOURCE:
entries[i]=getString(R.string.source_filter_name,getName(info.value));
break;
}
}
builder.setTitle(R.string.add_to_filter);
builder.setMultiChoiceItems(entries,null,this);
builder.setPositiveButton(android.R.string.ok,this);
builder.setNegativeButton(android.R.string.cancel,null);
return builder.create();
}
