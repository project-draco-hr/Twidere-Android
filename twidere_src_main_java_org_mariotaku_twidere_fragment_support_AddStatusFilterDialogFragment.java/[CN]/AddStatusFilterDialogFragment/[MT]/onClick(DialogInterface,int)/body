{
  final Set<Long> user_ids=new HashSet<>();
  final Set<String> keywords=new HashSet<>();
  final Set<String> sources=new HashSet<>();
  final ArrayList<ContentValues> userValues=new ArrayList<>();
  final ArrayList<ContentValues> keywordValues=new ArrayList<>();
  final ArrayList<ContentValues> sourceValues=new ArrayList<>();
  for (  final FilterItemInfo info : mCheckedFilterItems) {
    final Object value=info.value;
    if (value instanceof ParcelableUserMention) {
      final ParcelableUserMention mention=(ParcelableUserMention)value;
      user_ids.add(mention.id);
      userValues.add(ContentValuesCreator.createFilteredUser(mention));
    }
 else     if (value instanceof UserItem) {
      final UserItem item=(UserItem)value;
      user_ids.add(item.id);
      userValues.add(createFilteredUser(item));
    }
 else     if (info.type == FilterItemInfo.FILTER_TYPE_KEYWORD) {
      if (value != null) {
        final String keyword=ParseUtils.parseString(value);
        keywords.add(keyword);
        final ContentValues values=new ContentValues();
        values.put(Filters.Keywords.VALUE,"#" + keyword);
        keywordValues.add(values);
      }
    }
 else     if (info.type == FilterItemInfo.FILTER_TYPE_SOURCE) {
      if (value != null) {
        final String source=ParseUtils.parseString(value);
        sources.add(source);
        final ContentValues values=new ContentValues();
        values.put(Filters.Sources.VALUE,source);
        sourceValues.add(values);
      }
    }
  }
  final ContentResolver resolver=getContentResolver();
  ContentResolverUtils.bulkDelete(resolver,Filters.Users.CONTENT_URI,Filters.Users.USER_ID,user_ids,null,false);
  ContentResolverUtils.bulkDelete(resolver,Filters.Keywords.CONTENT_URI,Filters.Keywords.VALUE,keywords,null,true);
  ContentResolverUtils.bulkDelete(resolver,Filters.Sources.CONTENT_URI,Filters.Sources.VALUE,sources,null,true);
  ContentResolverUtils.bulkInsert(resolver,Filters.Users.CONTENT_URI,userValues);
  ContentResolverUtils.bulkInsert(resolver,Filters.Keywords.CONTENT_URI,keywordValues);
  ContentResolverUtils.bulkInsert(resolver,Filters.Sources.CONTENT_URI,sourceValues);
}
