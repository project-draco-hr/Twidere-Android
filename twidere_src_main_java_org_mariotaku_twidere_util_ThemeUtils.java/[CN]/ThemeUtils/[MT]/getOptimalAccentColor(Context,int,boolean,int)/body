{
  final int backgroundColorApprox;
  final boolean isDarkTheme=isDarkTheme(themeResId);
  if (!isActionBarContext) {
    backgroundColorApprox=isDarkTheme ? Color.BLACK : Color.WHITE;
  }
 else   if (isDarkTheme) {
    backgroundColorApprox=Color.BLACK;
  }
 else {
    backgroundColorApprox=Color.WHITE;
  }
  if (Math.abs(TwidereColorUtils.getYIQContrast(backgroundColorApprox,accentColor)) > DARK_COLOR_THRESHOLD)   return accentColor;
  return getColorFromAttribute(context,R.attr.colorAccent,ContextCompat.getColor(context,R.color.branding_color));
}
