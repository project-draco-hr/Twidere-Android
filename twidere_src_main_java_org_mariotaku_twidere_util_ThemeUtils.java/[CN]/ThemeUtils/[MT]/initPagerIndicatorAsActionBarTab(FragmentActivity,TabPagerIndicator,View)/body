{
  final float supportActionBarElevation=getSupportActionBarElevation(activity);
  ViewCompat.setElevation(indicator,supportActionBarElevation);
  if (!(activity instanceof IThemedActivity))   return;
  final int themeRes=((IThemedActivity)activity).getCurrentThemeResourceId();
  final int themeColor=((IThemedActivity)activity).getCurrentThemeColor();
  final int colorDark, colorLight;
  final int[] textColors=new int[2];
  getTextColorPrimaryAndInverse(activity,textColors);
  if (isDarkTheme(themeRes)) {
    colorDark=textColors[1];
    colorLight=textColors[0];
  }
 else {
    colorDark=textColors[0];
    colorLight=textColors[1];
  }
  final int contrastColor=TwidereColorUtils.getContrastYIQ(themeColor,ACCENT_COLOR_THRESHOLD,colorDark,colorLight);
  ViewSupport.setBackground(indicator,getActionBarStackedBackground(activity,themeRes,themeColor,true));
  if (isDarkTheme(themeRes)) {
    final int foregroundColor=getThemeForegroundColor(activity);
    indicator.setIconColor(foregroundColor);
    indicator.setLabelColor(foregroundColor);
    indicator.setStripColor(themeColor);
  }
 else {
    indicator.setIconColor(contrastColor);
    indicator.setLabelColor(contrastColor);
    indicator.setStripColor(contrastColor);
  }
  indicator.updateAppearance();
  if (pagerOverlay != null) {
    ViewSupport.setBackground(pagerOverlay,getNormalWindowContentOverlay(activity,themeRes));
  }
}
