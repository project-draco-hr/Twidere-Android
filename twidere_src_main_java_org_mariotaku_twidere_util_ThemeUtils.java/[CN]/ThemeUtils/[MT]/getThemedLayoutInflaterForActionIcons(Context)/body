{
  final int themeRes, accentColor;
  if (context instanceof IThemedActivity) {
    themeRes=((IThemedActivity)context).getThemeResourceId();
    accentColor=((IThemedActivity)context).getThemeColor();
  }
 else {
    themeRes=getSettingsThemeResource(context);
    accentColor=getUserAccentColor(context);
  }
  final Context theme=getThemedContextForActionIcons(context,themeRes,accentColor);
  return LayoutInflater.from(theme);
}
