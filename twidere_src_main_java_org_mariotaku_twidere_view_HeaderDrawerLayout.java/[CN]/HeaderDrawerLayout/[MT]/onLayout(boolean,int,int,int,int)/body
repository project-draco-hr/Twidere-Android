{
  for (int i=0, j=getChildCount(); i < j; i++) {
    final View child=getChildAt(i);
    final int left=getPaddingLeft(), right=left + child.getMeasuredWidth();
    final int top;
    if (i == 0) {
      if (shouldLayoutHeaderBottomCallback() && child.getHeight() != 0) {
        final int heightDelta=child.getMeasuredHeight() - child.getHeight();
        top=mHeaderOffset + getPaddingTop() - heightDelta;
      }
 else {
        top=mHeaderOffset + getPaddingTop();
      }
    }
 else {
      top=getChildAt(i - 1).getBottom();
    }
    final int bottom=top + child.getMeasuredHeight();
    child.layout(left,top,right,bottom);
    notifyOffsetChanged();
  }
}
