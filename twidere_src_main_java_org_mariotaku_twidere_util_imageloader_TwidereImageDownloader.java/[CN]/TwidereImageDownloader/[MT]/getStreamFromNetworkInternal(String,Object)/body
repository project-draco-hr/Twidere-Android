{
  final Uri uri=Uri.parse(uriString);
  final Authorization auth;
  final ParcelableCredentials account;
  if (isTwitterAuthRequired(uri) && extras instanceof AccountExtra) {
    final AccountExtra accountExtra=(AccountExtra)extras;
    account=ParcelableAccount.getCredentials(mContext,accountExtra.account_id);
    auth=getTwitterAuthorization(mContext,accountExtra.account_id);
  }
 else {
    account=null;
    auth=null;
  }
  String modifiedUri=getReplacedUri(uri,account != null ? account.api_url_format : null);
  if (mThumbor != null) {
    modifiedUri=mThumbor.buildImage(modifiedUri).filter(ThumborUrlBuilder.quality(85)).toUrl();
  }
  final HeaderMap additionalHeaders=new HeaderMap();
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
    additionalHeaders.addHeader("Accept","image/webp, */*");
  }
  final HttpResponse resp=getRedirectedHttpResponse(mClient,modifiedUri,uriString,auth,additionalHeaders);
  return new ContentLengthInputStream(resp.asStream(),(int)resp.getContentLength());
}
