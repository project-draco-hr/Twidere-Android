{
  super(context);
  mColorsAdapter=new ColorsAdapter(this,context);
  mResources=context.getResources();
  final float density=mResources.getDisplayMetrics().density;
  mIconWidth=(int)(32 * density);
  mIconHeight=(int)(32 * density);
  mRectangleSize=(int)(density * 5);
  mNumRectanglesHorizontal=(int)Math.ceil(mIconWidth / mRectangleSize);
  mNumRectanglesVertical=(int)Math.ceil(mIconHeight / mRectangleSize);
  mTempBitmap=Bitmap.createBitmap(mIconWidth,mIconHeight,Config.ARGB_8888);
  mCanvas=new Canvas(mTempBitmap);
  init(context,initialColor,showAlphaSlider);
  initColors();
  mColorsAdapter.setCurrentColor(initialColor);
}
