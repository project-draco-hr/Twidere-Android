{
  ResourceCounter rc=modeToCounter(mMode);
  if (rc != null) {
    releaseResource(rc);
  }
  mMode=MODE_NONE;
  rc=modeToCounter(mode);
  if (rc != null) {
    if (!acquireResource(rc))     return false;
    mMode=mode;
  }
  return true;
}
