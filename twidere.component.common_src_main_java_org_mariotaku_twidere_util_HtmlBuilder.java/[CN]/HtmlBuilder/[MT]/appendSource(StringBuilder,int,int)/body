{
  if (sourceIsEscaped == shouldReEscape) {
    for (int i=start; i < end; i++) {
      builder.appendCodePoint(codePoints.get(i));
    }
  }
 else   if (shouldReEscape) {
    builder.append(escape(codePoints.substring(start,end)));
  }
 else {
    builder.append(unescape(codePoints.substring(start,end)));
  }
}
