{
  mPackageManager=getPackageManager();
  mPreferences=getSharedPreferences(SHARED_PREFERENCES_NAME,MODE_PRIVATE);
  mCompactCards=mPreferences.getBoolean(KEY_COMPACT_CARDS,false);
  mPlainListStyle=mPreferences.getBoolean(KEY_PLAIN_LIST_STYLE,false);
  mCurrentThemeColor=ThemeUtils.getUserThemeColor(this);
  mCurrentThemeFontFamily=getThemeFontFamily();
  mCurrentThemeBackgroundAlpha=getThemeBackgroundAlpha();
  mCurrentIsDarkDrawerEnabled=isDarkDrawerEnabled();
  super.onCreate(savedInstanceState);
  setIntent(getIntent().addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT));
  final ActionBar actionBar=getActionBar();
  if (actionBar != null) {
    actionBar.setDisplayHomeAsUpEnabled(true);
  }
  if (savedInstanceState != null) {
    invalidateHeaders();
  }
}
