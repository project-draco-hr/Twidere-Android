{
  final Context context=getActivity();
  final SharedPreferences preferences=getSharedPreferences();
  final boolean sortById=preferences.getBoolean(KEY_SORT_TIMELINE_BY_ID,false);
  final Uri uri=getContentUri();
  final String table=getTableNameByUri(uri);
  final String sortOrder=sortById ? Statuses.SORT_ORDER_STATUS_ID_DESC : Statuses.SORT_ORDER_TIMESTAMP_DESC;
  final long accountId=getAccountId();
  final long[] accountIds=accountId > 0 ? new long[]{accountId} : getActivatedAccountIds(context);
  final boolean noAccountSelected=accountIds.length == 0;
  setEmptyText(noAccountSelected ? getString(R.string.no_account_selected) : null);
  if (!noAccountSelected) {
    getListView().setEmptyView(null);
  }
  final Where accountWhere=Where.in(new Column(Statuses.ACCOUNT_ID),new RawItemArray(accountIds));
  final Where where;
  if (isFiltersEnabled()) {
    final Where filterWhere=new Where(buildStatusFilterWhereClause(table,null,shouldEnableFiltersForRTs(context)));
    where=Where.and(accountWhere,filterWhere);
  }
 else {
    where=accountWhere;
  }
  final String selection=processWhere(where).getSQL();
  return new CursorLoader(context,uri,CursorStatusesListAdapter.CURSOR_COLS,selection,null,sortOrder);
}
