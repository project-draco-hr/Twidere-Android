{
  final List<Object> selectedItems=mMultiSelectManager.getSelectedItems();
  if (selectedItems.isEmpty())   return false;
switch (item.getItemId()) {
case MENU_REPLY:
{
      final Extractor extractor=new Extractor();
      final Intent intent=new Intent(INTENT_ACTION_REPLY_MULTIPLE);
      final Bundle bundle=new Bundle();
      final String[] accountScreenNames=getAccountScreenNames(mActivity);
      final Collection<String> allMentions=new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
      for (      final Object object : selectedItems) {
        if (object instanceof ParcelableStatus) {
          final ParcelableStatus status=(ParcelableStatus)object;
          allMentions.add(status.user_screen_name);
          allMentions.addAll(extractor.extractMentionedScreennames(status.text_plain));
        }
 else         if (object instanceof ParcelableUser) {
          final ParcelableUser user=(ParcelableUser)object;
          allMentions.add(user.screen_name);
        }
      }
      allMentions.removeAll(Arrays.asList(accountScreenNames));
      final Object firstObj=selectedItems.get(0);
      if (firstObj instanceof ParcelableStatus) {
        final ParcelableStatus first_status=(ParcelableStatus)firstObj;
        bundle.putLong(EXTRA_IN_REPLY_TO_ID,first_status.id);
      }
      bundle.putLong(EXTRA_ACCOUNT_ID,mMultiSelectManager.getAccountId());
      bundle.putStringArray(EXTRA_SCREEN_NAMES,allMentions.toArray(new String[allMentions.size()]));
      intent.putExtras(bundle);
      intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      mActivity.startActivity(intent);
      mode.finish();
      break;
    }
case MENU_MUTE_USER:
{
    final ContentResolver resolver=mActivity.getContentResolver();
    final ArrayList<ContentValues> valuesList=new ArrayList<ContentValues>();
    final Set<Long> userIds=new HashSet<Long>();
    for (    final Object object : selectedItems) {
      if (object instanceof ParcelableStatus) {
        final ParcelableStatus status=(ParcelableStatus)object;
        userIds.add(status.user_id);
        valuesList.add(ContentValuesCreator.makeFilteredUserContentValues(status));
      }
 else       if (object instanceof ParcelableUser) {
        final ParcelableUser user=(ParcelableUser)object;
        userIds.add(user.id);
        valuesList.add(ContentValuesCreator.makeFilteredUserContentValues(user));
      }
 else {
        continue;
      }
    }
    bulkDelete(resolver,Filters.Users.CONTENT_URI,Filters.Users.USER_ID,userIds,null,false);
    bulkInsert(resolver,Filters.Users.CONTENT_URI,valuesList);
    Toast.makeText(mActivity,R.string.message_users_muted,Toast.LENGTH_SHORT).show();
    mode.finish();
    mActivity.sendBroadcast(new Intent(BROADCAST_MULTI_MUTESTATE_CHANGED));
    break;
  }
case MENU_BLOCK:
{
  final long accountId=mMultiSelectManager.getAccountId();
  final long[] userIds=MultiSelectManager.getSelectedUserIds(selectedItems);
  if (accountId > 0 && userIds != null) {
    mTwitterWrapper.createMultiBlockAsync(accountId,userIds);
  }
  mode.finish();
  break;
}
case MENU_REPORT_SPAM:
{
final long accountId=mMultiSelectManager.getAccountId();
final long[] userIds=MultiSelectManager.getSelectedUserIds(selectedItems);
if (accountId > 0 && userIds != null) {
  mTwitterWrapper.reportMultiSpam(accountId,userIds);
}
mode.finish();
break;
}
}
if (item.getGroupId() == AccountActionProvider.MENU_GROUP) {
final Intent intent=item.getIntent();
if (intent == null || !intent.hasExtra(EXTRA_ACCOUNT)) return false;
final Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
mMultiSelectManager.setAccountId(account.account_id);
if (mAccountActionProvider != null) {
mAccountActionProvider.setAccountId(account.account_id);
}
mode.invalidate();
}
return true;
}
