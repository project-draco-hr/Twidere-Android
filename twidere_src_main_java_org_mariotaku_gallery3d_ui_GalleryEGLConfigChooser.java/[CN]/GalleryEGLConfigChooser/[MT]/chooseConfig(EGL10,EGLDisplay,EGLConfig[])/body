{
  EGLConfig result=null;
  int minStencil=Integer.MAX_VALUE;
  final int value[]=new int[1];
  for (  final EGLConfig config : configs) {
    if (!ApiHelper.USE_888_PIXEL_FORMAT) {
      if (egl.eglGetConfigAttrib(display,config,EGL10.EGL_RED_SIZE,value)) {
        if (value[0] == 8) {
          continue;
        }
      }
    }
    if (egl.eglGetConfigAttrib(display,config,EGL10.EGL_STENCIL_SIZE,value)) {
      if (value[0] == 0) {
        continue;
      }
      if (value[0] < minStencil) {
        minStencil=value[0];
        result=config;
      }
    }
 else     throw new RuntimeException("eglGetConfigAttrib error: " + egl.eglGetError());
  }
  if (result == null) {
    result=configs[0];
  }
  egl.eglGetConfigAttrib(display,result,EGL10.EGL_STENCIL_SIZE,value);
  logConfig(egl,display,result);
  return result;
}
