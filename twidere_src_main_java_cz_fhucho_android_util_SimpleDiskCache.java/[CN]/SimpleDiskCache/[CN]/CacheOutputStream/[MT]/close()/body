{
  IOException closeException=null;
  try {
    super.close();
  }
 catch (  IOException e) {
    closeException=e;
  }
  if (failed) {
    editor.abort();
  }
 else {
    editor.commit();
  }
  if (closeException != null)   throw closeException;
}
