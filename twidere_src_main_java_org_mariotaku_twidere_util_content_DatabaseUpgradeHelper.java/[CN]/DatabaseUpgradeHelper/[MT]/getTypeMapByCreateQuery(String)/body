{
  if (TextUtils.isEmpty(query))   return Collections.emptyMap();
  final int start=query.indexOf("("), end=query.lastIndexOf(")");
  if (start < 0 || end < 0)   return Collections.emptyMap();
  final HashMap<String,String> map=new HashMap<>();
  for (  final String segment : query.substring(start + 1,end).split(",")) {
    final String trimmed=segment.trim().replaceAll(" +"," ");
    final int idx=trimmed.indexOf(" ");
    map.put(trimmed.substring(0,idx),trimmed.substring(idx + 1,trimmed.length()));
  }
  return map;
}
