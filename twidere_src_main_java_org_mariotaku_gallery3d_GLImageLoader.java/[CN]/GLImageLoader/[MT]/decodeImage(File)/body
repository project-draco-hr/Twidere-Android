{
  final String path=file.getAbsolutePath();
  try {
    final BitmapRegionDecoder decoder=BitmapRegionDecoder.newInstance(path,false);
    final int width=decoder.getWidth();
    final int height=decoder.getHeight();
    final BitmapFactory.Options options=new BitmapFactory.Options();
    options.inSampleSize=BitmapUtils.computeSampleSize(mFallbackSize / Math.max(width,height));
    options.inPreferredConfig=Bitmap.Config.RGB_565;
    final Bitmap bitmap=decoder.decodeRegion(new Rect(0,0,width,height),options);
    return Result.getInstance(decoder,bitmap,Exif.getOrientation(file),file);
  }
 catch (  final IOException e) {
    return decodeBitmapOnly(file);
  }
}
