{
  try {
    final ArrayList<T> list=new ArrayList<>();
    while (reader.hasNext()) {
      final T object=cls.newInstance();
      object.read(reader);
      list.add(object);
    }
    @SuppressWarnings("unchecked") final T[] array=(T[])Array.newInstance(cls,list.size());
    return list.toArray(array);
  }
 catch (  IOException|IllegalStateException e) {
    return null;
  }
catch (  InstantiationException|IllegalAccessException e) {
    throw new RuntimeException(e);
  }
}
