{
  Authorization auth=null;
  final String consumerKey=conf.getOAuthConsumerKey();
  final String consumerSecret=conf.getOAuthConsumerSecret();
  if (consumerKey != null && consumerSecret != null) {
    OAuthAuthorization oauth;
    oauth=new OAuthAuthorization(conf);
    final String accessToken=conf.getOAuthAccessToken();
    final String accessTokenSecret=conf.getOAuthAccessTokenSecret();
    if (accessToken != null && accessTokenSecret != null) {
      oauth.setOAuthAccessToken(new AccessToken(accessToken,accessTokenSecret));
    }
    auth=oauth;
  }
 else {
    final String screenName=conf.getUser();
    final String password=conf.getPassword();
    if (screenName != null && password != null) {
      auth=new BasicAuthorization(screenName,password);
    }
  }
  if (null == auth) {
    auth=NullAuthorization.getInstance();
  }
  return auth;
}
