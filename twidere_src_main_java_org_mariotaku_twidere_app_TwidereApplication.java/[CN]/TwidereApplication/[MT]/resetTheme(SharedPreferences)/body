{
switch (Utils.getNonEmptyString(preferences,KEY_THEME,VALUE_THEME_NAME_LIGHT)) {
case VALUE_THEME_NAME_DARK:
{
      ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_YES);
      AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);
      break;
    }
case VALUE_THEME_NAME_AUTO:
{
    ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_AUTO);
    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_AUTO);
    break;
  }
default :
{
  ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_NO);
  AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);
  break;
}
}
}
