{
switch (ThemeUtils.getLocalNightMode(preferences)) {
case AppCompatDelegate.MODE_NIGHT_AUTO:
{
      ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_AUTO);
      AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_AUTO);
      break;
    }
case AppCompatDelegate.MODE_NIGHT_YES:
{
    ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_YES);
    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);
    break;
  }
default :
{
  ((UiModeManager)getSystemService(UI_MODE_SERVICE)).setNightMode(UiModeManager.MODE_NIGHT_NO);
  AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);
  break;
}
}
}
