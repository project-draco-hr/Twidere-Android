{
switch (key) {
case KEY_REFRESH_INTERVAL:
{
      stopService(new Intent(this,RefreshService.class));
      Utils.startRefreshServiceIfNeeded(this);
      break;
    }
case KEY_ENABLE_PROXY:
case KEY_PROXY_HOST:
case KEY_PROXY_PORT:
case KEY_PROXY_TYPE:
case KEY_PROXY_USERNAME:
case KEY_PROXY_PASSWORD:
case KEY_CONNECTION_TIMEOUT:
case KEY_RETRY_ON_NETWORK_ISSUE:
{
    HttpClientFactory.reloadConnectivitySettings(this);
    break;
  }
case KEY_DNS_SERVER:
case KEY_TCP_DNS_QUERY:
case KEY_BUILTIN_DNS_RESOLVER:
{
  reloadDnsSettings();
  break;
}
case KEY_CONSUMER_KEY:
case KEY_CONSUMER_SECRET:
case KEY_API_URL_FORMAT:
case KEY_AUTH_TYPE:
case KEY_SAME_OAUTH_SIGNING_URL:
case KEY_THUMBOR_ENABLED:
case KEY_THUMBOR_ADDRESS:
case KEY_THUMBOR_SECURITY_KEY:
{
final Editor editor=preferences.edit();
editor.putLong(KEY_API_LAST_CHANGE,System.currentTimeMillis());
editor.apply();
break;
}
case KEY_EMOJI_SUPPORT:
{
DependencyHolder.get(this).getExternalThemeManager().reloadEmojiPreferences();
break;
}
case KEY_THEME:
{
resetTheme(preferences);
Config.markChanged(this,VALUE_THEME_NAME_LIGHT,VALUE_THEME_NAME_DARK);
break;
}
case KEY_THEME_BACKGROUND:
{
Config.markChanged(this,VALUE_THEME_NAME_LIGHT,VALUE_THEME_NAME_DARK);
break;
}
case KEY_PROFILE_IMAGE_STYLE:
{
Config.markChanged(this,VALUE_THEME_NAME_LIGHT,VALUE_THEME_NAME_DARK);
mProfileImageViewViewProcessor.setStyle(Utils.getProfileImageStyle(preferences.getString(key,null)));
break;
}
case KEY_THEME_FONT_FAMILY:
{
Config.markChanged(this,VALUE_THEME_NAME_LIGHT,VALUE_THEME_NAME_DARK);
mFontFamilyTagProcessor.setFontFamily(ThemeUtils.getThemeFontFamily(preferences));
break;
}
case KEY_THEME_COLOR:
{
final int themeColor=preferences.getInt(key,ContextCompat.getColor(this,R.color.branding_color));
ATE.config(this,VALUE_THEME_NAME_LIGHT).primaryColor(themeColor).accentColor(ThemeUtils.getOptimalAccentColor(themeColor)).coloredActionBar(true).coloredStatusBar(true).commit();
ATE.config(this,VALUE_THEME_NAME_DARK).accentColor(ThemeUtils.getOptimalAccentColor(themeColor)).coloredActionBar(false).coloredStatusBar(true).statusBarColor(Color.BLACK).commit();
ATE.config(this,null).accentColor(ThemeUtils.getOptimalAccentColor(themeColor)).coloredActionBar(false).coloredStatusBar(false).commit();
break;
}
}
}
