{
  final int width=Math.round(bitmap.getWidth() * scale);
  final int height=Math.round(bitmap.getHeight() * scale);
  if (width == bitmap.getWidth() && height == bitmap.getHeight())   return bitmap;
  final Bitmap target=Bitmap.createBitmap(width,height,getConfig(bitmap));
  final Canvas canvas=new Canvas(target);
  canvas.scale(scale,scale);
  final Paint paint=new Paint(Paint.FILTER_BITMAP_FLAG | Paint.DITHER_FLAG);
  canvas.drawBitmap(bitmap,0,0,paint);
  if (recycle) {
    bitmap.recycle();
  }
  return target;
}
