{
  if (attrs != null) {
    final String defaultValue=attrs.getAttributeValue(ANDROID_NS,ATTR_DEFAULTVALUE);
    if (defaultValue != null && defaultValue.startsWith("#")) {
      try {
        setDefaultValue(Color.parseColor(defaultValue));
      }
 catch (      final IllegalArgumentException e) {
        Log.e("ColorPickerPreference","Wrong color: " + defaultValue);
        setDefaultValue(Color.WHITE);
      }
    }
 else {
      final int colorResourceId=attrs.getAttributeResourceValue(ANDROID_NS,ATTR_DEFAULTVALUE,0);
      if (colorResourceId != 0) {
        setDefaultValue(context.getResources().getColor(colorResourceId));
      }
    }
    mAlphaSliderEnabled=attrs.getAttributeBooleanValue(null,ATTR_ALPHASLIDER,false);
  }
}
