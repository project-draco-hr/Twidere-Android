{
  final float wFactor=1.0f;
  final float hFactor=1.0f;
  int viewW, viewH;
  if (mConstrained && !mConstrainedFrame.isEmpty() && b == mBox) {
    viewW=mConstrainedFrame.width();
    viewH=mConstrainedFrame.height();
  }
 else {
    viewW=mViewW;
    viewH=mViewH;
  }
  final float s=Math.min(wFactor * viewW / b.mImageW,hFactor * viewH / b.mImageH);
  return Math.min(SCALE_LIMIT,s);
}
