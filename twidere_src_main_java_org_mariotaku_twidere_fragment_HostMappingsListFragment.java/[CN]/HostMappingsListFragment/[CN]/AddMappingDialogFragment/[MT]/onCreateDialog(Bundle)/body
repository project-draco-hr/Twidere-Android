{
  final Context wrapped=ThemeUtils.getDialogThemedContext(getActivity());
  final AlertDialog.Builder builder=new AlertDialog.Builder(wrapped);
  @SuppressLint("InflateParams") final View view=LayoutInflater.from(getActivity()).inflate(R.layout.dialog_host_mapping,null);
  builder.setView(view);
  mEditHost=(EditText)view.findViewById(R.id.host);
  mEditAddress=(EditText)view.findViewById(R.id.address);
  mCheckExclude=(CheckBox)view.findViewById(R.id.exclude);
  mEditHost.addTextChangedListener(this);
  mEditAddress.addTextChangedListener(this);
  mCheckExclude.setOnCheckedChangeListener(this);
  final Bundle args=getArguments();
  mEditHost.setEnabled(!args.getBoolean(EXTRA_EDIT_MODE,false));
  if (savedInstanceState == null) {
    mEditHost.setText(args.getCharSequence(EXTRA_HOST));
    mEditAddress.setText(args.getCharSequence(EXTRA_ADDRESS));
    mCheckExclude.setChecked(args.getBoolean(EXTRA_EXCLUDED));
  }
  builder.setTitle(R.string.add_host_mapping);
  builder.setPositiveButton(android.R.string.ok,this);
  builder.setNegativeButton(android.R.string.cancel,null);
  final AlertDialog dialog=builder.create();
  dialog.setOnShowListener(this);
  return dialog;
}
