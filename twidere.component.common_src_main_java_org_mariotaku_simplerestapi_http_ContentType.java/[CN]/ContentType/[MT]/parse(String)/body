{
  final List<Pair<String,String>> parameters=new ArrayList<>();
  int previousIndex=string.indexOf(';',0);
  String contentType;
  if (previousIndex == -1) {
    contentType=string;
  }
 else {
    contentType=string.substring(0,previousIndex);
  }
  while (previousIndex != -1) {
    final int idx=string.indexOf(';',previousIndex + 1);
    final String[] segs;
    if (idx < 0) {
      segs=Utils.split(string.substring(previousIndex + 1,string.length()).trim(),"=");
    }
 else {
      segs=Utils.split(string.substring(previousIndex + 1,idx).trim(),"=");
    }
    if (segs.length == 2) {
      parameters.add(Pair.create(segs[0],segs[1]));
    }
    if (idx < 0) {
      break;
    }
    previousIndex=idx;
  }
  return new ContentType(contentType,parameters);
}
