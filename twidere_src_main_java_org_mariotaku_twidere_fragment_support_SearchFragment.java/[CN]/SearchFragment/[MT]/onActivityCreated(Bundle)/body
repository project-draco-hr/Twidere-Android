{
  super.onActivityCreated(savedInstanceState);
  setHasOptionsMenu(true);
  final Bundle args=getArguments();
  final FragmentActivity activity=getActivity();
  mAdapter=new SupportTabsAdapter(activity,getChildFragmentManager(),null,1);
  mAdapter.addTab(SearchStatusesFragment.class,args,getString(R.string.statuses),R.drawable.ic_iconic_action_twitter,0);
  mAdapter.addTab(SearchUsersFragment.class,args,getString(R.string.users),R.drawable.ic_iconic_action_user,1);
  mViewPager.setAdapter(mAdapter);
  mViewPager.setOnPageChangeListener(this);
  mViewPager.setOffscreenPageLimit(2);
  final TypedArray a=activity.obtainStyledAttributes(new int[]{android.R.attr.colorForeground});
  final int foregroundColor=a.getColor(0,Color.GRAY);
  a.recycle();
  mPagerIndicator.setFillColor(foregroundColor);
  mPagerIndicator.setStrokeColor(foregroundColor);
  mPagerIndicator.setViewPager(mViewPager);
  if (savedInstanceState == null && args != null && args.containsKey(EXTRA_QUERY)) {
    final String query=args.getString(EXTRA_QUERY);
    final SearchRecentSuggestions suggestions=new SearchRecentSuggestions(getActivity(),RecentSearchProvider.AUTHORITY,RecentSearchProvider.MODE);
    suggestions.saveRecentQuery(query,null);
    if (activity instanceof LinkHandlerActivity) {
      final ActionBar ab=activity.getActionBar();
      if (ab != null) {
        ab.setSubtitle(query);
      }
    }
  }
}
