{
  super.onActivityCreated(savedInstanceState);
  setHasOptionsMenu(true);
  final Bundle args=getArguments();
  final FragmentActivity activity=getActivity();
  mPagerAdapter=new SupportTabsAdapter(activity,getChildFragmentManager(),null,1);
  mPagerAdapter.addTab(StatusesSearchFragment.class,args,getString(R.string.statuses),R.drawable.ic_action_twitter,0,null);
  mPagerAdapter.addTab(SearchUsersFragment.class,args,getString(R.string.users),R.drawable.ic_action_user,1,null);
  mViewPager.setAdapter(mPagerAdapter);
  mViewPager.setOffscreenPageLimit(2);
  mPagerIndicator.setViewPager(mViewPager);
  mPagerIndicator.setTabDisplayOption(TabPagerIndicator.LABEL);
  mPagerIndicator.setOnPageChangeListener(this);
  ThemeUtils.initPagerIndicatorAsActionBarTab(activity,mPagerIndicator);
  ThemeUtils.setCompatToolbarOverlay(activity,new EmptyDrawable());
  if (savedInstanceState == null && args != null && args.containsKey(EXTRA_QUERY)) {
    final String query=args.getString(EXTRA_QUERY);
    final SearchRecentSuggestions suggestions=new SearchRecentSuggestions(getActivity(),RecentSearchProvider.AUTHORITY,RecentSearchProvider.MODE);
    suggestions.saveRecentQuery(query,null);
    final ContentResolver cr=getContentResolver();
    final ContentValues values=new ContentValues();
    values.put(SearchHistory.QUERY,query);
    cr.insert(SearchHistory.CONTENT_URI,values);
    if (activity instanceof LinkHandlerActivity) {
      final ActionBar ab=activity.getActionBar();
      if (ab != null) {
        ab.setSubtitle(query);
      }
    }
  }
  updateTabOffset();
}
