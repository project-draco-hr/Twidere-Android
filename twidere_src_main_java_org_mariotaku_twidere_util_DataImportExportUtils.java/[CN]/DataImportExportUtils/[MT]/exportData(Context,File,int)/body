{
  if (dst == null)   throw new FileNotFoundException();
  dst.delete();
  final FileOutputStream fos=new FileOutputStream(dst);
  final ZipOutputStream zos=new ZipOutputStream(new BufferedOutputStream(fos));
  if (hasFlag(flags,FLAG_PREFERENCES)) {
    writeSharedPreferencesData(zos,context,SHARED_PREFERENCES_NAME,ENTRY_PREFERENCES);
  }
  if (hasFlag(flags,FLAG_NICKNAMES)) {
    writeRawSharedPreferencesData(zos,context,USER_NICKNAME_PREFERENCES_NAME,ENTRY_NICKNAMES);
  }
  if (hasFlag(flags,FLAG_USER_COLORS)) {
    writeRawSharedPreferencesData(zos,context,USER_COLOR_PREFERENCES_NAME,ENTRY_USER_COLORS);
  }
  if (hasFlag(flags,FLAG_HOST_MAPPING)) {
    writeRawSharedPreferencesData(zos,context,HOST_MAPPING_PREFERENCES_NAME,ENTRY_HOST_MAPPING);
  }
  zos.finish();
  zos.flush();
  Utils.closeSilently(zos);
  Utils.closeSilently(fos);
}
