{
  if (intent == null)   return false;
  final String action=intent.getAction();
  mShouldSaveAccounts=!Intent.ACTION_SEND.equals(action) && !Intent.ACTION_SEND_MULTIPLE.equals(action);
  final Uri data=intent.getData();
  final CharSequence extraSubject=intent.getCharSequenceExtra(Intent.EXTRA_SUBJECT);
  final CharSequence extraText=intent.getCharSequenceExtra(Intent.EXTRA_TEXT);
  final Uri extraStream=intent.getParcelableExtra(Intent.EXTRA_STREAM);
  if (extraStream != null) {
    new AddMediaTask(this,extraStream,createTempImageUri(),ParcelableMedia.TYPE_IMAGE,false).execute();
  }
 else   if (data != null) {
    new AddMediaTask(this,data,createTempImageUri(),ParcelableMedia.TYPE_IMAGE,false).execute();
  }
  mEditText.setText(getShareStatus(this,extraSubject,extraText));
  final int selection_end=mEditText.length();
  mEditText.setSelection(selection_end);
  return true;
}
