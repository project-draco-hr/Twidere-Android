{
  final int keyCode=event.getKeyCode();
  if (KeyEvent.isModifierKey(keyCode)) {
    final int action=event.getAction();
    if (action == MotionEvent.ACTION_DOWN) {
      mKeyMetaState|=KeyboardShortcutsHandler.getMetaStateForKeyCode(keyCode);
    }
 else     if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
      mKeyMetaState&=~KeyboardShortcutsHandler.getMetaStateForKeyCode(keyCode);
    }
  }
  return super.dispatchKeyEvent(event);
}
