{
switch (requestCode) {
case REQUEST_TAKE_PHOTO:
{
      if (resultCode == Activity.RESULT_OK) {
        mTask=AsyncTaskUtils.executeTask(new AddMediaTask(this,mTempPhotoUri,createTempImageUri(),ParcelableMedia.TYPE_IMAGE,true));
        mTempPhotoUri=null;
      }
      break;
    }
case REQUEST_PICK_IMAGE:
{
    if (resultCode == Activity.RESULT_OK) {
      final Uri src=intent.getData();
      mTask=AsyncTaskUtils.executeTask(new AddMediaTask(this,src,createTempImageUri(),ParcelableMedia.TYPE_IMAGE,false));
    }
    break;
  }
case REQUEST_OPEN_DOCUMENT:
{
  if (resultCode == Activity.RESULT_OK) {
    final Uri src=intent.getData();
    mTask=AsyncTaskUtils.executeTask(new AddMediaTask(this,src,createTempImageUri(),ParcelableMedia.TYPE_IMAGE,false));
  }
  break;
}
case REQUEST_EDIT_IMAGE:
{
if (resultCode == Activity.RESULT_OK) {
  final Uri uri=intent.getData();
  if (uri == null) {
    break;
  }
  setMenu();
  updateTextCount();
}
break;
}
case REQUEST_EXTENSION_COMPOSE:
{
if (resultCode == Activity.RESULT_OK) {
final String text=intent.getStringExtra(EXTRA_TEXT);
final String append=intent.getStringExtra(EXTRA_APPEND_TEXT);
final Uri imageUri=intent.getParcelableExtra(EXTRA_IMAGE_URI);
if (text != null) {
  mEditText.setText(text);
}
 else if (append != null) {
  mEditText.append(append);
}
if (imageUri != null) {
}
setMenu();
updateTextCount();
}
break;
}
}
}
