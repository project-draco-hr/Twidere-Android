{
  if (mediaArray == null) {
    for (int i=0, j=getChildCount(); i < j; i++) {
      final View child=getChildAt(i);
      child.setVisibility(GONE);
    }
    return;
  }
  final View.OnClickListener clickListener=new ImageGridClickListener(mediaClickListener,accountId);
  for (int i=0, j=getChildCount(), k=mediaArray.length; i < j; i++) {
    final View child=getChildAt(i);
    child.setOnClickListener(clickListener);
    final ImageView imageView=(ImageView)child.findViewById(R.id.media_preview);
    if (i < k) {
      final ParcelableMedia media=mediaArray[i];
      loader.displayPreviewImage(imageView,media.url,loadingHandler);
      child.setVisibility(VISIBLE);
      if (i == j - 1) {
        final TextView moreIndicator=(TextView)child.findViewById(R.id.more_media);
        moreIndicator.setVisibility(j < k ? VISIBLE : GONE);
        if (k > j) {
          final int extraMediaCount=k - j;
          moreIndicator.setText(getResources().getQuantityString(R.plurals.N_media,extraMediaCount,extraMediaCount));
        }
 else {
          moreIndicator.setText(null);
        }
      }
    }
 else {
      loader.cancelDisplayTask(imageView);
      child.setVisibility(GONE);
    }
  }
}
