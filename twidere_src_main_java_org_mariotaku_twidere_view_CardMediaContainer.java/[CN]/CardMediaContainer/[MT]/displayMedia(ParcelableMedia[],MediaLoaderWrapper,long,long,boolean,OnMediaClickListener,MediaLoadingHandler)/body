{
  if (mediaArray == null || mMediaPreviewStyle == VALUE_MEDIA_PREVIEW_STYLE_CODE_NONE) {
    for (int i=0, j=getChildCount(); i < j; i++) {
      final View child=getChildAt(i);
      child.setTag(null);
      child.setVisibility(GONE);
    }
    return;
  }
  final View.OnClickListener clickListener=new ImageGridClickListener(mediaClickListener,accountId,extraId);
  for (int i=0, j=getChildCount(), k=mediaArray.length; i < j; i++) {
    final View child=getChildAt(i);
    child.setOnClickListener(clickListener);
    final ImageView imageView=(ImageView)child.findViewById(R.id.media_preview);
switch (mMediaPreviewStyle) {
case VALUE_MEDIA_PREVIEW_STYLE_CODE_CROP:
{
        imageView.setScaleType(ScaleType.CENTER_CROP);
        break;
      }
case VALUE_MEDIA_PREVIEW_STYLE_CODE_SCALE:
{
      imageView.setScaleType(ScaleType.FIT_CENTER);
      break;
    }
}
if (i < k) {
  final ParcelableMedia media=mediaArray[i];
  final String url=TextUtils.isEmpty(media.preview_url) ? media.media_url : media.preview_url;
  if (withCredentials) {
    loader.displayPreviewImageWithCredentials(imageView,url,accountId,loadingHandler);
  }
 else {
    loader.displayPreviewImage(imageView,url,loadingHandler);
  }
  if (imageView instanceof MediaPreviewImageView) {
    ((MediaPreviewImageView)imageView).setHasPlayIcon(ParcelableMediaUtils.hasPlayIcon(media.type));
  }
  child.setTag(media);
  child.setVisibility(VISIBLE);
  if (i == j - 1) {
    final TextView moreIndicator=(TextView)child.findViewById(R.id.more_media);
    moreIndicator.setVisibility(j < k ? VISIBLE : GONE);
    if (k > j) {
      final int extraMediaCount=k - j;
      moreIndicator.setText(getResources().getQuantityString(R.plurals.N_media,extraMediaCount,extraMediaCount));
    }
 else {
      moreIndicator.setText(null);
    }
  }
}
 else {
  loader.cancelDisplayTask(imageView);
  child.setVisibility(GONE);
}
}
}
