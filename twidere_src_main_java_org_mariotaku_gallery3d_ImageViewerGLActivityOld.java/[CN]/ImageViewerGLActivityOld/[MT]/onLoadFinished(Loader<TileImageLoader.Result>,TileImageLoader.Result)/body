{
  if (data != null && (data.decoder != null || data.bitmap != null)) {
    if (data.decoder != null) {
      mGLRootView.setVisibility(View.VISIBLE);
      mImageViewer.setVisibility(View.GONE);
      mAdapter.setData(data.decoder,data.bitmap,data.orientation);
      mImageViewer.setImageBitmap(null);
    }
 else     if (data.bitmap != null) {
      mGLRootView.setVisibility(View.GONE);
      mImageViewer.setVisibility(View.VISIBLE);
      mImageViewer.setImageBitmap(data.bitmap);
    }
    mImageFile=data.file;
  }
 else {
    mImageFile=null;
    if (data != null) {
      Utils.showErrorMessage(this,null,data.exception,true);
    }
  }
  mProgress.setVisibility(View.GONE);
  mProgress.setProgress(0);
  invalidateOptionsMenu();
  updateShareIntent();
}
