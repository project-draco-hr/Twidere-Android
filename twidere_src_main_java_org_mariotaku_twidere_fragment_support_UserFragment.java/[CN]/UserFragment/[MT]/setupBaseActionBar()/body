{
  final FragmentActivity activity=getActivity();
  if (!(activity instanceof LinkHandlerActivity))   return;
  final LinkHandlerActivity linkHandler=(LinkHandlerActivity)activity;
  final ActionBar actionBar=linkHandler.getSupportActionBar();
  if (actionBar == null)   return;
  final Drawable shadow=ResourcesCompat.getDrawable(activity.getResources(),R.drawable.shadow_user_banner_action_bar,null);
  mActionBarBackground=new ActionBarDrawable(shadow);
  if (!ThemeUtils.isWindowFloating(linkHandler,linkHandler.getCurrentThemeResourceId()) && ThemeUtils.isTransparentBackground(linkHandler.getCurrentThemeBackgroundOption())) {
    mActionBarBackground.setAlpha(linkHandler.getCurrentThemeBackgroundAlpha());
    mProfileBannerView.setAlpha(linkHandler.getCurrentThemeBackgroundAlpha() / 255f);
  }
  actionBar.setBackgroundDrawable(mActionBarBackground);
  mActionBarHomeAsUpIndicator=ThemeUtils.getActionBarHomeAsUpIndicator(actionBar);
  actionBar.setHomeAsUpIndicator(mActionBarHomeAsUpIndicator);
}
