{
  final FragmentActivity activity=getActivity();
  if (!(activity instanceof LinkHandlerActivity))   return;
  final LinkHandlerActivity linkHandler=(LinkHandlerActivity)activity;
  final ActionBar actionBar=linkHandler.getSupportActionBar();
  if (actionBar == null)   return;
  final int themeResId=linkHandler.getCurrentThemeResourceId();
  final Drawable shadow=ResourcesCompat.getDrawable(activity.getResources(),R.drawable.shadow_user_banner_action_bar,null);
  final Drawable background=ThemeUtils.getActionBarBackground(activity,themeResId);
  mActionBarBackground=new ActionBarDrawable(getResources(),shadow,background,ThemeUtils.isDarkTheme(themeResId));
  mActionBarBackground.setAlpha(linkHandler.getCurrentThemeBackgroundAlpha());
  mProfileBannerView.setAlpha(linkHandler.getCurrentThemeBackgroundAlpha() / 255f);
  actionBar.setBackgroundDrawable(mActionBarBackground);
}
