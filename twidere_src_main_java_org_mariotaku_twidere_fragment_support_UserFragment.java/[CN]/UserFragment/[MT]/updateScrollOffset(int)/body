{
  final View space=mProfileBannerSpace;
  final ProfileBannerImageView profileBannerView=mProfileBannerView;
  final View profileBannerContainer=mProfileBannerContainer;
  final int spaceHeight=space.getHeight();
  final float factor=MathUtils.clamp(offset / (float)spaceHeight,0,1);
  profileBannerContainer.setTranslationY(Math.max(-offset,-spaceHeight));
  profileBannerView.setTranslationY(Math.min(offset,spaceHeight) / 2);
  if (mActionBarBackground != null && mTintedStatusContent != null) {
    mActionBarBackground.setFactor(factor);
    mTintedStatusContent.setFactor(factor);
    final float profileContentHeight=mProfileNameContainer.getHeight() + mProfileDetailsContainer.getHeight();
    final float tabOutlineAlphaFactor;
    if ((offset - spaceHeight) > 0) {
      tabOutlineAlphaFactor=1f - MathUtils.clamp((offset - spaceHeight) / profileContentHeight,0,1);
    }
 else {
      tabOutlineAlphaFactor=1f;
    }
    mActionBarBackground.setOutlineAlphaFactor(tabOutlineAlphaFactor);
    final ThemedActionBarActivity activity=(ThemedActionBarActivity)getActivity();
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
      setCompatToolbarOverlayAlpha(activity,factor * tabOutlineAlphaFactor);
    }
    final Drawable drawable=mPagerIndicator.getBackground();
    final int stackedTabColor;
    final int themeId=activity.getCurrentThemeResourceId();
    if (ThemeUtils.isDarkTheme(themeId)) {
      stackedTabColor=getResources().getColor(R.color.background_color_action_bar_dark);
      final int contrastColor=ColorUtils.getContrastYIQ(stackedTabColor,192);
      mPagerIndicator.setIconColor(contrastColor);
      mPagerIndicator.setLabelColor(contrastColor);
      mPagerIndicator.setStripColor(mUserUiColor);
    }
 else     if (drawable instanceof ColorDrawable) {
      stackedTabColor=mUserUiColor;
      final int tabColor=(Integer)sArgbEvaluator.evaluate(tabOutlineAlphaFactor,stackedTabColor,mCardBackgroundColor);
      ((ColorDrawable)drawable).setColor(tabColor);
      final int contrastColor=ColorUtils.getContrastYIQ(tabColor,192);
      mPagerIndicator.setIconColor(contrastColor);
      mPagerIndicator.setLabelColor(contrastColor);
      mPagerIndicator.setStripColor(contrastColor);
    }
 else {
      return;
    }
    final int barColor=(Integer)sArgbEvaluator.evaluate(factor,mActionBarShadowColor,stackedTabColor);
    final int itemColor=ThemeUtils.getContrastActionBarItemColor(activity,themeId,barColor);
    if (mActionBarHomeAsUpIndicator != null) {
      mActionBarHomeAsUpIndicator.setColorFilter(itemColor,Mode.SRC_ATOP);
    }
    final View actionBarView=activity.getWindow().findViewById(android.support.v7.appcompat.R.id.action_bar);
    if (actionBarView instanceof Toolbar) {
      final Toolbar toolbar=(Toolbar)actionBarView;
      toolbar.setTitleTextColor(itemColor);
      toolbar.setSubtitleTextColor(itemColor);
      ThemeUtils.setActionBarOverflowColor(toolbar,itemColor);
      ThemeUtils.wrapToolbarMenuIcon(ViewUtils.findViewByType(actionBarView,ActionMenuView.class),itemColor,itemColor);
    }
    mPagerIndicator.updateAppearance();
  }
  updateTitleAlpha();
}
