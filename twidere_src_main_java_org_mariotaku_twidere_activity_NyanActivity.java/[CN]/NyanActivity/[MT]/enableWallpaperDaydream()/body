{
  final PackageManager pm=getPackageManager();
  final ComponentName wallpaperComponent=new ComponentName(this,NyanWallpaperService.class);
  final int wallpaperState=pm.getComponentEnabledSetting(wallpaperComponent);
  boolean showToast=false;
  if (wallpaperState != PackageManager.COMPONENT_ENABLED_STATE_ENABLED) {
    pm.setComponentEnabledSetting(wallpaperComponent,PackageManager.COMPONENT_ENABLED_STATE_ENABLED,PackageManager.DONT_KILL_APP);
    showToast=true;
  }
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
    final ComponentName daydreamComponent=new ComponentName(this,NyanDaydreamService.class);
    final int daydreamState=pm.getComponentEnabledSetting(daydreamComponent);
    if (daydreamState != PackageManager.COMPONENT_ENABLED_STATE_ENABLED) {
      pm.setComponentEnabledSetting(daydreamComponent,PackageManager.COMPONENT_ENABLED_STATE_ENABLED,PackageManager.DONT_KILL_APP);
      showToast=true;
    }
  }
  if (showToast) {
    Toast.makeText(this,R.string.livewp_daydream_enabled_message,Toast.LENGTH_SHORT).show();
  }
}
